{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "1e3e94fd_03d0bd2e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 3353420
      },
      "writtenOn": "2024-04-30T05:20:12Z",
      "side": 1,
      "message": "Sure! Thanks for the input.",
      "revId": "16c2fd14cd29ac80c8908e78f54a0cd7438791c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "41329f1a_4cb78175",
        "filename": "camera/ndk/impl/ACameraManager.cpp",
        "patchSetId": 1
      },
      "lineNbr": 88,
      "author": {
        "id": 1121338
      },
      "writtenOn": "2024-04-18T15:49:39Z",
      "side": 1,
      "message": "if we change to `waitForService()` we shouldn\u0027t need to do this in a loop ?\n\n`waitForService()` only returns nullptr on a permission error / fatal error : https://cs.android.com/android/platform/superproject/main/+/main:prebuilts/vndk/v34/x86/include/frameworks/native/libs/binder/include/binder/IServiceManager.h;l\u003d95?q\u003d%22prefer%20waitFor%22",
      "range": {
        "startLine": 87,
        "startChar": 12,
        "endLine": 88,
        "endChar": 21
      },
      "revId": "16c2fd14cd29ac80c8908e78f54a0cd7438791c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4f28839f_1a7630a5",
        "filename": "camera/ndk/impl/ACameraManager.cpp",
        "patchSetId": 1
      },
      "lineNbr": 88,
      "author": {
        "id": 1121338
      },
      "writtenOn": "2024-04-18T15:52:10Z",
      "side": 1,
      "message": "or if we want to have a loop to ensure cameraservice fetched is never nullptr - then we use `checkService()`",
      "parentUuid": "41329f1a_4cb78175",
      "range": {
        "startLine": 87,
        "startChar": 12,
        "endLine": 88,
        "endChar": 21
      },
      "revId": "16c2fd14cd29ac80c8908e78f54a0cd7438791c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a137dc4a_d8b55f14",
        "filename": "camera/ndk/impl/ACameraManager.cpp",
        "patchSetId": 1
      },
      "lineNbr": 88,
      "author": {
        "id": 1121338
      },
      "writtenOn": "2024-04-18T16:08:34Z",
      "side": 1,
      "message": "which would be the same as getService() effectively",
      "parentUuid": "4f28839f_1a7630a5",
      "range": {
        "startLine": 87,
        "startChar": 12,
        "endLine": 88,
        "endChar": 21
      },
      "revId": "16c2fd14cd29ac80c8908e78f54a0cd7438791c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "698c0b4f_32376a03",
        "filename": "camera/ndk/impl/ACameraManager.cpp",
        "patchSetId": 1
      },
      "lineNbr": 88,
      "author": {
        "id": 1900056
      },
      "writtenOn": "2024-04-18T18:27:41Z",
      "side": 1,
      "message": "Because CameraService should always be present and running by the time any app loads, it is better to use `getService` rather than `waitForService` and error out if cameraservice is missing when the app starts. \n\nCameraService doesn\u0027t advertise itself in VINTF, so if cameraservice crashloops or is missing from the system, `waitForService` will wait indefinitely for cameraservice to come up.",
      "parentUuid": "a137dc4a_d8b55f14",
      "range": {
        "startLine": 87,
        "startChar": 12,
        "endLine": 88,
        "endChar": 21
      },
      "revId": "16c2fd14cd29ac80c8908e78f54a0cd7438791c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3d496aab_c6672e8f",
        "filename": "camera/ndk/impl/ACameraManager.cpp",
        "patchSetId": 1
      },
      "lineNbr": 88,
      "author": {
        "id": 1010050
      },
      "writtenOn": "2024-04-18T21:02:53Z",
      "side": 1,
      "message": "Just in general, since we do have handling for the \u0027no service\u0027 case already, at some point we should stop waiting and return `null`.  \n\nI\u0027m not sure what the right delay is (1 second? 5 seems too long), but we should get rid of this infinite loop either way.",
      "parentUuid": "698c0b4f_32376a03",
      "range": {
        "startLine": 87,
        "startChar": 12,
        "endLine": 88,
        "endChar": 21
      },
      "revId": "16c2fd14cd29ac80c8908e78f54a0cd7438791c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e4a405a4_23aee5de",
        "filename": "camera/ndk/impl/ACameraManager.cpp",
        "patchSetId": 1
      },
      "lineNbr": 88,
      "author": {
        "id": 3353420
      },
      "writtenOn": "2024-04-24T05:25:59Z",
      "side": 1,
      "message": "I did not get clear idea from comments about the required changes, can anyone suggest further changes required here?",
      "parentUuid": "3d496aab_c6672e8f",
      "range": {
        "startLine": 87,
        "startChar": 12,
        "endLine": 88,
        "endChar": 21
      },
      "revId": "16c2fd14cd29ac80c8908e78f54a0cd7438791c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "122d8be3_54ac8a93",
        "filename": "camera/ndk/impl/ACameraManager.cpp",
        "patchSetId": 1
      },
      "lineNbr": 88,
      "author": {
        "id": 1900056
      },
      "writtenOn": "2024-04-29T17:19:57Z",
      "side": 1,
      "message": "Sorry, just getting back to this.\n\nThe gist of the comments are:\n1. Remove the infinite `do..while` loop.\n2. Replace `waitForService` with `getService` so we don\u0027t end up waiting indefinitely if cameraservice is missing.\n\nCameraService should always be running, and in error case all access to cameraservice should be null checked and handle missing cameraservice, so the infinite loop is not needed here.\n\nThank you uploading the patch!",
      "parentUuid": "e4a405a4_23aee5de",
      "range": {
        "startLine": 87,
        "startChar": 12,
        "endLine": 88,
        "endChar": 21
      },
      "revId": "16c2fd14cd29ac80c8908e78f54a0cd7438791c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1de6d6a9_476e2d96",
        "filename": "camera/ndk/impl/ACameraManager.cpp",
        "patchSetId": 1
      },
      "lineNbr": 88,
      "author": {
        "id": 3353420
      },
      "writtenOn": "2024-04-30T05:20:12Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "122d8be3_54ac8a93",
      "range": {
        "startLine": 87,
        "startChar": 12,
        "endLine": 88,
        "endChar": 21
      },
      "revId": "16c2fd14cd29ac80c8908e78f54a0cd7438791c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}