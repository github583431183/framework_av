{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "0d2f747d_a8fc6e63",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1108919
      },
      "writtenOn": "2021-05-21T23:37:42Z",
      "side": 1,
      "message": "i like the new approach better.\n\nwe probably also want to think about how the decoder can handle multiple frames sooner rather than later.  I see there is a big TODO at the top of the loop in the decoder that talks about\nhow it needs to be extended to handle multiple frames.",
      "revId": "d1e1060fe7d28f14a39759588d06105214976cb8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "efc49fc3_b8b184f5",
        "filename": "media/codec2/components/flac/C2SoftFlacEnc.cpp",
        "patchSetId": 2
      },
      "lineNbr": 86,
      "author": {
        "id": 1108919
      },
      "writtenOn": "2021-05-21T23:37:42Z",
      "side": 1,
      "message": "I do still like using the defined constant here rather than the magic number 4608. That\u0027s good.",
      "range": {
        "startLine": 86,
        "startChar": 74,
        "endLine": 86,
        "endChar": 95
      },
      "revId": "d1e1060fe7d28f14a39759588d06105214976cb8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7970478b_51f5b5d2",
        "filename": "media/codec2/components/flac/C2SoftFlacEnc.cpp",
        "patchSetId": 2
      },
      "lineNbr": 327,
      "author": {
        "id": 1108919
      },
      "writtenOn": "2021-05-21T23:37:42Z",
      "side": 1,
      "message": "we\u0027re going to come through here for each frame that the encoder returns.\nso we\u0027ll know whether we\u0027re getting multiple frames back in the same buffer.\n\nwe *could* count the # of buffers here (and their offsets/sizes)",
      "range": {
        "startLine": 327,
        "startChar": 0,
        "endLine": 327,
        "endChar": 69
      },
      "revId": "d1e1060fe7d28f14a39759588d06105214976cb8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "da74500e_56f82321",
        "filename": "media/codec2/components/flac/C2SoftFlacEnc.cpp",
        "patchSetId": 2
      },
      "lineNbr": 361,
      "author": {
        "id": 1108919
      },
      "writtenOn": "2021-05-21T23:37:42Z",
      "side": 1,
      "message": "I\u0027d like us to look at handling the \"large buffers allows the codec to send back multiple frames\" with some work with changes here....\n\n-- we just got a buffer, send it back (or at least queue it up to be sent)\n-- we know how many samples were included in this frame (i think that\u0027s the samples parameter)\n-- so we know if this was the last bit of data that will come back (and therefore whether we need to allocate another buffer for the data to come back.)\n-- so we know whether we need to get an additional buffer for any following frames that the codec might emit in this go-round.\n\n\nthis feels more robust than trying to manage the \"give me only 1 frame\" problem by manipulating the buffer capacity...",
      "range": {
        "startLine": 361,
        "startChar": 12,
        "endLine": 361,
        "endChar": 37
      },
      "revId": "d1e1060fe7d28f14a39759588d06105214976cb8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "56abaf0c_2835d2f4",
        "filename": "media/codec2/components/flac/C2SoftFlacEnc.cpp",
        "patchSetId": 2
      },
      "lineNbr": 385,
      "author": {
        "id": 1108919
      },
      "writtenOn": "2021-05-20T14:35:58Z",
      "side": 1,
      "message": "set_blocksize documentation in flac says:\n\n * The number of samples to use per frame.  Use \\c 0 to let the encoder\n * estimate a blocksize; this is usually best.\n\n\nany particular reason we don\u0027t use 0 here and let the encoder choose\nwhat is best (and then we can use the get_blocksize() to find out what it chose).\n\n[it would differ from the old method because before this, we didn\u0027t set blocksize\nat all, this would be an explicit set_blocksize(0) to ask flac to calculate one]",
      "range": {
        "startLine": 385,
        "startChar": 69,
        "endLine": 385,
        "endChar": 82
      },
      "revId": "d1e1060fe7d28f14a39759588d06105214976cb8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "aeea311f_faf3578f",
        "filename": "media/codec2/components/flac/C2SoftFlacEnc.cpp",
        "patchSetId": 2
      },
      "lineNbr": 385,
      "author": {
        "id": 1150374
      },
      "writtenOn": "2021-05-20T15:21:59Z",
      "side": 1,
      "message": "For single channel input, default block size was chosen as 1152, As the max input size was configured to 4608, for PCM_s16le single channel input in one call we are 2 Frames are getting encoded. When this output is fed directly to decoder, only one frame is getting decoded and the other is getting skipped, resulting in Identity test failing for FLAC component. Decoder FLAC plugin is designed to decode only one Frame per call.",
      "parentUuid": "56abaf0c_2835d2f4",
      "range": {
        "startLine": 385,
        "startChar": 69,
        "endLine": 385,
        "endChar": 82
      },
      "revId": "d1e1060fe7d28f14a39759588d06105214976cb8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b1935df0_ad95f8c9",
        "filename": "media/codec2/components/flac/C2SoftFlacEnc.cpp",
        "patchSetId": 2
      },
      "lineNbr": 385,
      "author": {
        "id": 1150374
      },
      "writtenOn": "2021-05-20T15:27:22Z",
      "side": 1,
      "message": "An alternate way is to change the test, where we write the encoded output to a file and open and decoded it. That way plugin need not be changed",
      "parentUuid": "aeea311f_faf3578f",
      "range": {
        "startLine": 385,
        "startChar": 69,
        "endLine": 385,
        "endChar": 82
      },
      "revId": "d1e1060fe7d28f14a39759588d06105214976cb8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "47f8e13e_48f581ab",
        "filename": "media/codec2/components/flac/C2SoftFlacEnc.cpp",
        "patchSetId": 2
      },
      "lineNbr": 385,
      "author": {
        "id": 1108919
      },
      "writtenOn": "2021-05-21T23:37:42Z",
      "side": 1,
      "message": "I think i want us to consider a different direction....",
      "parentUuid": "b1935df0_ad95f8c9",
      "range": {
        "startLine": 385,
        "startChar": 69,
        "endLine": 385,
        "endChar": 82
      },
      "revId": "d1e1060fe7d28f14a39759588d06105214976cb8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}