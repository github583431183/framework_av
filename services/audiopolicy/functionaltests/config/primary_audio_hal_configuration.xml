<?xml version='1.0' encoding='UTF-8'?>
<module name="primary" halVersion="6.0" xmlns:xi="http://www.w3.org/2001/XInclude">
    <attachedDevices>
        <item>bus0_usage_main</item>
        <item>bus1_usage_nav_guidance</item>
        <item>bus2_usage_oem</item>
        <item>bus3_usage_system</item>
        <item>bus4_usage_voice</item>
        <item>builtin_mic</item>
        <item>radio_ta</item>
        <item>xcall</item>
        <!--item>Echo Reference</item-->
        <item>telephony_rx_hw</item>
        <item>telephony_tx_hw</item>
        <item>fm_tuner</item>
        <item>telephony_tx</item>
        <item>telephony_rx</item>
        <item>speaker</item>
    </attachedDevices>

    <defaultOutputDevice>bus0_usage_main</defaultOutputDevice>
    <mixPorts>
        <mixPort name="primary_input" role="sink"
            supportedUseCases="AUDIO_SOURCE_DEFAULT,AUDIO_SOURCE_MIC,AUDIO_SOURCE_VOICE_COMMUNICATION,AUDIO_SOURCE_CAMCORDER,AUDIO_SOURCE_VOICE_UPLINK,AUDIO_SOURCE_VOICE_CALL,AUDIO_SOURCE_VOICE_RECOGNITION,AUDIO_SOURCE_HOTWORD,AUDIO_SOURCE_UNPROCESSED,AUDIO_SOURCE_VOICE_PERFORMANCE,AUDIO_SOURCE_ECHO_REFERENCE">
            <profile name="" format="AUDIO_FORMAT_PCM_16_BIT"
                     samplingRates="8000,11025,16000,24000,44100,48000" channelMasks="AUDIO_CHANNEL_IN_STEREO,AUDIO_CHANNEL_IN_MONO,AUDIO_CHANNEL_IN_FRONT_BACK"/>
            <audioDevice card="card0" device="0" periodSize="720" periodCount="4">
                <profile name="" format="AUDIO_FORMAT_PCM_16_BIT"
                                 samplingRates="44100,48000" channelMasks="AUDIO_CHANNEL_IN_STEREO"/>
            </audioDevice>
        </mixPort>
        <mixPort name="radio_input" role="sink" supportedUseCases="AUDIO_SOURCE_FM_TUNER,AUDIO_SOURCE_MIC">
           <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="48000" channelMasks="AUDIO_CHANNEL_IN_STEREO"/>
           <nullAudioDevice card="card0" device="0" periodSize="720" periodCount="4"/>
        </mixPort>
        <mixPort name="mixport_bus0_usage_main_output" role="source" flags="AUDIO_OUTPUT_FLAG_PRIMARY">
            <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="48000" channelMasks="AUDIO_CHANNEL_OUT_STEREO"/>
            <mixAudioDevice card="card0" device="0" periodSize="720" periodCount="4" availMin="720"/>
        </mixPort>
        <mixPort name="mixport_bus1_usage_nav_guidance_output" role="source" flags="AUDIO_OUTPUT_FLAG_PRIMARY">
             <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="48000" channelMasks="AUDIO_CHANNEL_OUT_STEREO"/>
             <mixAudioDevice card="card1" device="0" periodSize="720" periodCount="4" availMin="720"/>
        </mixPort>
        <mixPort name="mixport_bus2_usage_oem_output" role="source" flags="AUDIO_OUTPUT_FLAG_PRIMARY">
            <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="48000" channelMasks="AUDIO_CHANNEL_OUT_STEREO"/>
            <mixAudioDevice card="card2" device="0" periodSize="720" periodCount="4" availMin="720"/>
        </mixPort>
        <mixPort name="mixport_bus3_usage_system_output" role="source" flags="AUDIO_OUTPUT_FLAG_PRIMARY">
            <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="48000" channelMasks="AUDIO_CHANNEL_OUT_STEREO"/>
            <mixAudioDevice card="card3" device="0" periodSize="720" periodCount="4" availMin="720"/>
        </mixPort>
        <mixPort name="mixport_bus4_usage_voice_output" role="source" flags="AUDIO_OUTPUT_FLAG_PRIMARY">
            <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="48000" channelMasks="AUDIO_CHANNEL_OUT_STEREO"/>
            <mixAudioDevice card="card4" device="0" periodSize="720" periodCount="4" availMin="720"/>
        </mixPort>
        <mixPort name="mixport_speaker_output" role="source" flags="AUDIO_OUTPUT_FLAG_PRIMARY">
            <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="48000" channelMasks="AUDIO_CHANNEL_OUT_STEREO"/>
            <mixAudioDevice card="card0" device="0" periodSize="720" periodCount="4" availMin="720"/>
        </mixPort>
        <mixPort name="mixport_sco_output" role="source" flags="AUDIO_OUTPUT_FLAG_PRIMARY">
            <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="48000" channelMasks="AUDIO_CHANNEL_OUT_STEREO"/>
            <mixAudioDevice card="card0" device="0" periodSize="720" periodCount="4" availMin="720"/>
        </mixPort>
        <mixPort name="hfp_tx_mix" role="source" flags="AUDIO_OUTPUT_FLAG_PRIMARY">
            <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="48000" channelMasks="AUDIO_CHANNEL_OUT_STEREO"/>
            <mixAudioDevice card="card2" device="0" periodSize="720" periodCount="4"/>
        </mixPort>
        <mixPort name="hfp_rx_mix" role="sink" flags="AUDIO_INPUT_FLAG_PRIMARY" supportedUseCases="AUDIO_SOURCE_DEFAULT,AUDIO_SOURCE_MIC,AUDIO_SOURCE_VOICE_DOWNLINK">
            <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="48000" channelMasks="AUDIO_CHANNEL_IN_STEREO"/>
            <nullAudioDevice card="card2" device="0" periodSize="720" periodCount="4"/>
        </mixPort>
        <mixPort name="mixport_radio_ta" role="sink" supportedUseCases="AUDIO_SOURCE_DEFAULT,AUDIO_SOURCE_MIC,AUDIO_SOURCE_FM_TUNER">
            <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="8000,11025,16000,44100,48000" channelMasks="AUDIO_CHANNEL_IN_STEREO,AUDIO_CHANNEL_IN_MONO"/>
            <nullAudioDevice card="card0" device="0" periodSize="720" periodCount="4"/>
        </mixPort>
        <mixPort name="xcall_mix" role="sink" flags="AUDIO_INPUT_FLAG_PRIMARY" supportedUseCases="AUDIO_SOURCE_DEFAULT,AUDIO_SOURCE_MIC,AUDIO_SOURCE_VOICE_DOWNLINK">
            <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="48000" channelMasks="AUDIO_CHANNEL_IN_STEREO"/>
            <mixAudioDevice card="card2" device="0" periodSize="720" periodCount="4"/>
        </mixPort>
        <mixPort name="mixport_bus3_usage_system_direct_output" role="source" flags="AUDIO_OUTPUT_FLAG_DIRECT|AUDIO_OUTPUT_FLAG_HW_AV_SYNC">
            <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="48000" channelMasks="AUDIO_CHANNEL_OUT_STEREO"/>
            <mixAudioDevice card="card2" device="0" periodSize="720" periodCount="4" availMin="720"/>
        </mixPort>
        <mixPort name="mixport_fm_sw" role="sink" supportedUseCases="AUDIO_SOURCE_DEFAULT,AUDIO_SOURCE_MIC,AUDIO_SOURCE_FM_TUNER">
            <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="8000,11025,16000,44100,48000" channelMasks="AUDIO_CHANNEL_IN_STEREO,AUDIO_CHANNEL_IN_MONO"/>
            <mixAudioDevice card="card0" device="0" periodSize="960" periodCount="2">
                <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="44100,48000" channelMasks="AUDIO_CHANNEL_IN_STEREO"/>
            </mixAudioDevice>
        </mixPort>
        <mixPort name="mixport_fm_hw" role="sink" supportedUseCases="AUDIO_SOURCE_DEFAULT,AUDIO_SOURCE_MIC,AUDIO_SOURCE_FM_TUNER">
            <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="8000,11025,16000,44100,48000" channelMasks="AUDIO_CHANNEL_IN_STEREO,AUDIO_CHANNEL_IN_MONO"/>
            <mixAudioDevice card="card0" device="0" periodSize="960" periodCount="2">
                <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="44100,48000" channelMasks="AUDIO_CHANNEL_IN_STEREO"/>
            </mixAudioDevice>
       </mixPort>
    </mixPorts>

    <devicePorts>
        <!-- Input devices declaration, i.e. Source DEVICE PORT -->
        <devicePort tagName="builtin_mic" type="AUDIO_DEVICE_IN_BUILTIN_MIC" role="source" address="bottom">
            <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="16000,24000,48000" channelMasks="AUDIO_CHANNEL_IN_MONO,AUDIO_CHANNEL_IN_STEREO"/>
        </devicePort>
        <devicePort tagName="fm_tuner" type="AUDIO_DEVICE_IN_FM_TUNER" role="source" address="tuner0">
            <profile name="" format="AUDIO_FORMAT_PCM_16_BIT"
                    samplingRates="48000" channelMasks="AUDIO_CHANNEL_IN_STEREO"/>
            <gains>
                <gain name="" mode="AUDIO_GAIN_MODE_JOINT"
                      minValueMB="-3200" maxValueMB="600" defaultValueMB="0" stepValueMB="100" minIndex="0" maxIndex="74"/>
            </gains>
        </devicePort>

        <!-- Output devices declaration, i.e. Sink DEVICE PORT -->
        <devicePort tagName="speaker" type="AUDIO_DEVICE_OUT_SPEAKER" role="sink" address="SPEAKER">
            <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="48000" channelMasks="AUDIO_CHANNEL_OUT_STEREO"/>
            <gains>
                <gain name="" mode="AUDIO_GAIN_MODE_JOINT"
                    minValueMB="-2400" maxValueMB="0" defaultValueMB="-100" stepValueMB="1" minIndex="0" maxIndex="74"/>
            </gains>
        </devicePort>
        <devicePort tagName="bus0_usage_main" type="AUDIO_DEVICE_OUT_BUS" role="sink" address="BUS00_MEDIA">
            <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="48000" channelMasks="AUDIO_CHANNEL_OUT_STEREO"/>
            <gains>
                <!-- useForVolume allows AudioPolicyManager to switch to setAudioPortConfig,
                     managing priority of clients according to product strategy priorities in case
                     of conflicts (as only one port gain for the mixer -->
                <gain useForVolume="true" name="volume_bus0_usage_main" mode="AUDIO_GAIN_MODE_JOINT"
                    minValueMB="-8800" maxValueMB="1200" defaultValueMB="-4550" stepValueMB="250" minIndex="0" maxIndex="74"/>
            </gains>
        </devicePort>
        <devicePort tagName="bus1_usage_nav_guidance" type="AUDIO_DEVICE_OUT_BUS" role="sink" address="BUS02_NAV_GUIDANCE">
            <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="48000" channelMasks="AUDIO_CHANNEL_OUT_STEREO"/>
            <gains>
                <gain defaultValueMB="-100" maxValueMB="0" minValueMB="-2400" mode="AUDIO_GAIN_MODE_JOINT"
                    name="volume_bus1_usage_nav_guidance" stepValueMB="1" useForVolume="true" minIndex="0" maxIndex="74"/>
            </gains>
        </devicePort>
        <devicePort tagName="bus2_usage_oem" type="AUDIO_DEVICE_OUT_BUS" role="sink" address="BUS01_SYS_NOTIFICATION">
            <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="48000" channelMasks="AUDIO_CHANNEL_OUT_STEREO"/>
            <gains>
                <gain name="volume_bus2_usage_oem" useForVolume="true" mode="AUDIO_GAIN_MODE_JOINT"
                    minValueMB="-8800" maxValueMB="4000" defaultValueMB="0" stepValueMB="100" minIndex="0" maxIndex="74"/>
            </gains>
        </devicePort>
        <devicePort tagName="bus3_usage_system" type="AUDIO_DEVICE_OUT_BUS" role="sink" address="BUS05_BEEP_CLICK">
            <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="48000" channelMasks="AUDIO_CHANNEL_OUT_STEREO"/>
            <gains>
                <gain defaultValueMB="0" maxValueMB="4000" minValueMB="-8800" mode="AUDIO_GAIN_MODE_JOINT"
                    name="volume_bus3_usage_system" stepValueMB="100" useForVolume="true" minIndex="0" maxIndex="74"/>
            </gains>
        </devicePort>
        <devicePort tagName="bus4_usage_voice" type="AUDIO_DEVICE_OUT_BUS" role="sink" address="BUS03_PHONE">
            <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="48000" channelMasks="AUDIO_CHANNEL_OUT_STEREO"/>
            <gains>
                <gain defaultValueMB="0" maxValueMB="4000" minValueMB="-8800" mode="AUDIO_GAIN_MODE_JOINT"
                    name="volume_bus4_usage_voice" stepValueMB="100" useForVolume="true" minIndex="0" maxIndex="74"/>
            </gains>
        </devicePort>

        <devicePort tagName="Stub-In" type="AUDIO_DEVICE_IN_STUB" role="source" address="STUB_IN">
            <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="48000" channelMasks="AUDIO_CHANNEL_IN_MONO,AUDIO_CHANNEL_IN_STEREO"/>
        </devicePort>

        <!-- Device Ports for BT Call -->
        <devicePort tagName="telephony_rx" type="AUDIO_DEVICE_IN_TELEPHONY_RX" role="source" address="hfp_client_in">
            <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="48000" channelMasks="AUDIO_CHANNEL_IN_MONO,AUDIO_CHANNEL_IN_STEREO"/>
            <gains>
                <gain defaultValueMB="0" maxValueMB="4000" minValueMB="-8400" mode="AUDIO_GAIN_MODE_JOINT"
                    name="" stepValueMB="100" useForVolume="false" minIndex="0" maxIndex="74"/>
            </gains>
        </devicePort>
        <devicePort tagName="telephony_tx" type="AUDIO_DEVICE_OUT_TELEPHONY_TX" role="sink" address="hfp_client_out">
            <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="48000" channelMasks="AUDIO_CHANNEL_OUT_STEREO"/>
            <gains>
                <gain defaultValueMB="0" maxValueMB="4000" minValueMB="-8800" mode="AUDIO_GAIN_MODE_JOINT"
                    name="" stepValueMB="100" useForVolume="false" minIndex="0" maxIndex="74"/>
            </gains>
        </devicePort>
        <devicePort tagName="telephony_rx_hw" type="AUDIO_DEVICE_IN_TELEPHONY_RX" role="source" address="hfp_client_in_hw">
            <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="48000" channelMasks="AUDIO_CHANNEL_IN_MONO,AUDIO_CHANNEL_IN_STEREO"/>
            <gains>
                <gain defaultValueMB="0" maxValueMB="4000" minValueMB="-8400" mode="AUDIO_GAIN_MODE_JOINT"
                    name="" stepValueMB="100" useForVolume="false" minIndex="0" maxIndex="74"/>
            </gains>
        </devicePort>
        <devicePort tagName="telephony_tx_hw" type="AUDIO_DEVICE_OUT_TELEPHONY_TX" role="sink" address="hfp_client_out_hw">
            <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="48000" channelMasks="AUDIO_CHANNEL_OUT_STEREO"/>
            <gains>
                <gain defaultValueMB="0" maxValueMB="4000" minValueMB="-8400" mode="AUDIO_GAIN_MODE_JOINT"
                    name="" stepValueMB="100" useForVolume="false" minIndex="0" maxIndex="74"/>
            </gains>
        </devicePort>
        <devicePort tagName="bt_sco" type="AUDIO_DEVICE_OUT_BLUETOOTH_SCO" role="sink" address="sco_out_address">
            <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="48000" channelMasks="AUDIO_CHANNEL_OUT_MONO,AUDIO_CHANNEL_OUT_STEREO"/>
            <gains>
                <gain defaultValueMB="0" maxValueMB="4000" minValueMB="-8400" mode="AUDIO_GAIN_MODE_JOINT"
                    name="" stepValueMB="100" useForVolume="false" minIndex="0" maxIndex="74"/>
            </gains>
        </devicePort>
        <devicePort tagName="bt_sco_in" type="AUDIO_DEVICE_IN_BLUETOOTH_SCO_HEADSET" role="source" address="sco_in_address">
            <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="48000" channelMasks="AUDIO_CHANNEL_IN_MONO,AUDIO_CHANNEL_IN_STEREO"/>
            <gains>
                <gain defaultValueMB="0" maxValueMB="4000" minValueMB="-8400" mode="AUDIO_GAIN_MODE_JOINT"
                    name="" stepValueMB="100" useForVolume="false" minIndex="0" maxIndex="74"/>
            </gains>
        </devicePort>

        <!-- Device Port for XCall -->
        <devicePort tagName="xcall" type="AUDIO_DEVICE_IN_BUS" role="source" address="xcall0">
            <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="8000,16000"
                     channelMasks="AUDIO_CHANNEL_IN_MONO,AUDIO_CHANNEL_IN_STEREO"/>
            <gains>
                <gain name="" mode="AUDIO_GAIN_MODE_JOINT"
                      minValueMB="-4800" maxValueMB="1200" defaultValueMB="0" stepValueMB="150" minIndex="0" maxIndex="74"/>
            </gains>
        </devicePort>
        <!-- Device Port for TA Radio -->
        <devicePort tagName="radio_ta" type="AUDIO_DEVICE_IN_FM_TUNER" role="source" address="ta0">
            <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="48000" channelMasks="AUDIO_CHANNEL_IN_MONO,AUDIO_CHANNEL_IN_STEREO"/>
            <gains>
                <gain name="" mode="AUDIO_GAIN_MODE_JOINT" minValueMB="-4800" maxValueMB="1200" defaultValueMB="0" stepValueMB="150" useForVolume="false" minIndex="0" maxIndex="74"/>
            </gains>
        </devicePort>

        <devicePort address="FM_SW" role="source" tagName="fm_sw" type="AUDIO_DEVICE_IN_FM_TUNER">
            <profile channelMasks="AUDIO_CHANNEL_IN_STEREO" format="AUDIO_FORMAT_PCM_16_BIT" name="" samplingRates="48000" />
            <gains>
                <gain name="" mode="AUDIO_GAIN_MODE_JOINT" minValueMB="-2400" maxValueMB="4000" defaultValueMB="0" stepValueMB="100" minIndex="0" maxIndex="74"/>
            </gains>
        </devicePort>
        <devicePort address="FM_HW" role="source" tagName="fm_hw" type="AUDIO_DEVICE_IN_FM_TUNER">
            <profile channelMasks="AUDIO_CHANNEL_IN_STEREO" format="AUDIO_FORMAT_PCM_16_BIT" name="" samplingRates="48000" />
              <gains>
                 <gain name="" mode="AUDIO_GAIN_MODE_JOINT" minValueMB="-8400" maxValueMB="4000" defaultValueMB="0" stepValueMB="100" minIndex="0" maxIndex="74"/>
             </gains>
        </devicePort>
        <devicePort tagName="Hdmi-In Mic" type="AUDIO_DEVICE_IN_HDMI" role="source" address="hdmi_in_mic">
            <profile name="" format="AUDIO_FORMAT_PCM_16_BIT" samplingRates="48000" channelMasks="AUDIO_CHANNEL_IN_MONO,AUDIO_CHANNEL_IN_STEREO"/>
            <gains>
                <gain name="" mode="AUDIO_GAIN_MODE_JOINT" minValueMB="-2400" maxValueMB="0" defaultValueMB="-100" stepValueMB="100" minIndex="0" maxIndex="74"/>
            </gains>
        </devicePort>
    </devicePorts>

    <!-- route declaration, i.e. list all available sources for a given sink -->
    <routes>
        <route type="mix" sink="primary_input" sources="builtin_mic,Hdmi-In Mic,Stub-In,bt_sco_in"/>
        <route type="mix" sink="radio_input" sources="fm_tuner,radio_ta"/>
        <route type="mix" sink="speaker" sources="mixport_speaker_output,mixport_bus0_usage_main_output"/>
        <route type="mix" sink="bus1_usage_nav_guidance" sources="mixport_bus1_usage_nav_guidance_output,fm_hw"/>
        <route type="mix" sink="bus2_usage_oem" sources="mixport_bus2_usage_oem_output,fm_hw"/>
        <route type="mix" sink="bus3_usage_system" sources="mixport_bus3_usage_system_output,mixport_bus3_usage_system_direct_output,fm_hw"/>
        <route type="mix" sink="bus0_usage_main" sources="mixport_bus0_usage_main_output,fm_hw,radio_ta"/>
        <route type="mix" sink="bus4_usage_voice" sources="mixport_bus4_usage_voice_output,fm_hw,telephony_rx_hw"/>
        <route type="mix" sink="telephony_tx" sources="hfp_tx_mix,mixport_bus0_usage_main_output"/>
        <route type="mix" sink="mixport_fm_sw" sources="fm_sw,Stub-In,mixport_bus0_usage_main_output"/>
        <route type="mix" sink="mixport_fm_hw" sources="fm_hw"/>
        <route type="mix" sink="telephony_tx_hw" sources="builtin_mic,hfp_tx_mix,bt_sco_in"/>
        <route type="mix" sink="hfp_rx_mix" sources="telephony_rx,telephony_rx_hw"/>
        <route type="mix" sink="xcall_mix" sources="xcall"/>
        <route type="mix" sink="mixport_radio_ta" sources="radio_ta,Stub-In"/>
        <route type="mix" sink="bt_sco" sources="mixport_sco_output,telephony_rx_hw"/>
    </routes>

    <!-- Audio HAL Custom section -->
    <xi:include href="audio_criterion_types.xml"/>
    <xi:include href="audio_criteria.xml"/>
    <xi:include href="audio_rogue_parameters_volumes.xml"/>
    <!-- End of Audio HAL Custom section -->

</module>
