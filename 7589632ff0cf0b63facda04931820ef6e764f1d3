{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "fc1dc4ab_377ee9a5",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 14,
      "author": {
        "id": 1108919
      },
      "writtenOn": "2024-02-28T21:31:38Z",
      "side": 1,
      "message": "is this better done as an include similar to crash_dump and coverage?",
      "range": {
        "startLine": 14,
        "startChar": 25,
        "endLine": 14,
        "endChar": 55
      },
      "revId": "7589632ff0cf0b63facda04931820ef6e764f1d3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4640d93c_05f94542",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 14,
      "author": {
        "id": 1019050
      },
      "writtenOn": "2024-02-28T22:13:09Z",
      "side": 1,
      "message": "Honestly, this would be better done as a single file generating all of the different versions of the policy files so a lot of this wouldn\u0027t be needed.\n\nHowever, it is pretty painful to add any new policy files, so I would say leaving it like this is the least bad and we probably won\u0027t need to change this for years.",
      "parentUuid": "fc1dc4ab_377ee9a5",
      "range": {
        "startLine": 14,
        "startChar": 25,
        "endLine": 14,
        "endChar": 55
      },
      "revId": "7589632ff0cf0b63facda04931820ef6e764f1d3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "551ccc2b_4ef901be",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 22,
      "author": {
        "id": 1108919
      },
      "writtenOn": "2024-02-28T21:29:02Z",
      "side": 1,
      "message": "was this tested solely on current system builds?\n\nI ask because these files live in mainline.\nThis CL is paired with changes in system/core/debuggerd, which will not go to the older system builds (R/S/T). I don\u0027t remember whether that a failure there means \"nonfunctional jail\" or \"service refuses to start\".\n\nthe good news is that the code that chooses which policy file to load is also in the mainline module, so we have the ability to\ndo something morally equivalent to:\n\nSetUpMiniJail( isBeforeV() ? \"preV.policy\" : mediaswcodec.policy\");",
      "range": {
        "startLine": 22,
        "startChar": 0,
        "endLine": 22,
        "endChar": 59
      },
      "revId": "7589632ff0cf0b63facda04931820ef6e764f1d3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b9a64759_b6a6164c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 22,
      "author": {
        "id": 1019050
      },
      "writtenOn": "2024-02-28T22:10:25Z",
      "side": 1,
      "message": "I did test on current systems, but as you mention, the files are all put in the apex. I don\u0027t think that should ever be a problem since other policy files already do this inclusion.\n\ndebuggerd only ever adds system calls, never removes. So as long as we continue to do that, I thinks this should be fine even going into the future.\n\nIf we do think this is going to be a problem, we would need to add some kind of versioned policy file, probably based on Android API level. I don\u0027t think that\u0027s necessary yet.",
      "parentUuid": "551ccc2b_4ef901be",
      "range": {
        "startLine": 22,
        "startChar": 0,
        "endLine": 22,
        "endChar": 59
      },
      "revId": "7589632ff0cf0b63facda04931820ef6e764f1d3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8ae9bdec_157263d9",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 22,
      "author": {
        "id": 1108919
      },
      "writtenOn": "2024-02-28T22:40:30Z",
      "side": 1,
      "message": "re: testing older stuff\nmt recollection is that we did have a problem before, and that\u0027s why this didn\u0027t use the @include construct. it\u0027s been a while, so the details have gotten foggy.",
      "parentUuid": "b9a64759_b6a6164c",
      "range": {
        "startLine": 22,
        "startChar": 0,
        "endLine": 22,
        "endChar": 59
      },
      "revId": "7589632ff0cf0b63facda04931820ef6e764f1d3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e08e7494_cd5776e8",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 22,
      "author": {
        "id": 1108919
      },
      "writtenOn": "2024-02-28T23:19:54Z",
      "side": 1,
      "message": "we used to also @include from /system/etc and it appears that all of the policy\nfiles are now carried along with the apex.\nIt also appears that I was the one that made that change.\nan example of my earlier \"details have gotten foggy\" comment.",
      "parentUuid": "8ae9bdec_157263d9",
      "range": {
        "startLine": 22,
        "startChar": 0,
        "endLine": 22,
        "endChar": 59
      },
      "revId": "7589632ff0cf0b63facda04931820ef6e764f1d3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6c4dcb26_feaf3e45",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 22,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2024-02-29T09:23:03Z",
      "side": 1,
      "message": "\u003e debuggerd only ever adds system calls, never removes. So as long as we continue to do that, I thinks this should be fine even going into the future.\n\nI might be misunderstanding, but isn\u0027t the concern here that mediaswcodec might unknowingly be relying on permissions from debuggerd? And thus changing debuggerd\u0027s policies might cause breakage in mediaswcodec? It seems like a valid concern to me. If a permission is granted for one use-case, there\u0027s no way to know if subsequent functionality has been added that now relies on it.",
      "parentUuid": "e08e7494_cd5776e8",
      "range": {
        "startLine": 22,
        "startChar": 0,
        "endLine": 22,
        "endChar": 59
      },
      "revId": "7589632ff0cf0b63facda04931820ef6e764f1d3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "325f55cf_698f44f6",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 22,
      "author": {
        "id": 1019050
      },
      "writtenOn": "2024-02-29T21:55:26Z",
      "side": 1,
      "message": "Yes, that could be a problem, but I\u0027m not sure how to fix it.\n\nI think this is the least bad solution since we don\u0027t need to remember to fix this file if debuggerd requires a new syscall.\n\nOne way to verify if this file alone is correct would be to run tests without the debuggerd include file, but even that doesn\u0027t guarantee full coverage.\n\nIf you have any ideas, I\u0027d be happy to try and implement them or test them.",
      "parentUuid": "6c4dcb26_feaf3e45",
      "range": {
        "startLine": 22,
        "startChar": 0,
        "endLine": 22,
        "endChar": 59
      },
      "revId": "7589632ff0cf0b63facda04931820ef6e764f1d3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b41fff01_5418b283",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 22,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2024-03-04T11:32:13Z",
      "side": 1,
      "message": "I don\u0027t have any suggestions other than what Ray suggested above - test the updated Mainline module against previous versions of the platform ðŸ˜ž",
      "parentUuid": "325f55cf_698f44f6",
      "range": {
        "startLine": 22,
        "startChar": 0,
        "endLine": 22,
        "endChar": 59
      },
      "revId": "7589632ff0cf0b63facda04931820ef6e764f1d3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "29847458_28b2448e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 22,
      "author": {
        "id": 1108919
      },
      "writtenOn": "2024-03-04T17:25:39Z",
      "side": 1,
      "message": "built swcodec from main + these 2 cls, loaded the apex into an Android R device\nand the result didn\u0027t produce audio (the relevant audio codecs are in swcodec).\n\nI haven\u0027t chased through the logcat yet to root cause it.\nBut the implication is that this set of CLs isn\u0027t quite ready.",
      "parentUuid": "b41fff01_5418b283",
      "range": {
        "startLine": 22,
        "startChar": 0,
        "endLine": 22,
        "endChar": 59
      },
      "revId": "7589632ff0cf0b63facda04931820ef6e764f1d3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3bff264b_b1355963",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 22,
      "author": {
        "id": 1108919
      },
      "writtenOn": "2024-03-04T18:15:27Z",
      "side": 1,
      "message": "reading logcats -- there appears to be some aidl/hidl mismatches in swcodec.\nmain-built module w/o these CLs still fails when installed on R-based system.\n\nI think this set of CLs is ok.",
      "parentUuid": "29847458_28b2448e",
      "range": {
        "startLine": 22,
        "startChar": 0,
        "endLine": 22,
        "endChar": 59
      },
      "revId": "7589632ff0cf0b63facda04931820ef6e764f1d3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6ee96254_53f8df73",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1108919
      },
      "writtenOn": "2024-02-28T21:29:02Z",
      "side": 1,
      "message": "it feels like this is ready for the \"whatever.policy.def\" to generated whatever.policy.{arm/arm64/x86/etc} that is used in syste,/core/code_coverage\nand debuggerd\n\nI\u0027m not saying that this CL needs to do that; but it feels like that\u0027s the next step in code hygiene for this set of files.",
      "revId": "7589632ff0cf0b63facda04931820ef6e764f1d3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}