{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "f25a6680_7bf1f214",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1352498
      },
      "writtenOn": "2022-11-22T08:08:41Z",
      "side": 1,
      "message": "Hi Wonsik and Lajos, please help on this one. Thanks.",
      "revId": "777077121b1aec5d13882162f75f760349fd9012",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "45642404_f915a208",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1903520
      },
      "writtenOn": "2022-12-29T07:36:16Z",
      "side": 1,
      "message": "It still requires an approval from one of code owners.\nCould any of code owners do that please?",
      "revId": "777077121b1aec5d13882162f75f760349fd9012",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b5c98c3d_35660323",
        "filename": "media/libmediaplayerservice/StagefrightMetadataRetriever.cpp",
        "patchSetId": 1
      },
      "lineNbr": 242,
      "author": {
        "id": 1018606
      },
      "writtenOn": "2023-01-04T01:29:01Z",
      "side": 1,
      "message": "can FrameDecoder instead check if decoders on the device support P010 color format?",
      "revId": "777077121b1aec5d13882162f75f760349fd9012",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "77619642_deb19d2e",
        "filename": "media/libmediaplayerservice/StagefrightMetadataRetriever.cpp",
        "patchSetId": 1
      },
      "lineNbr": 242,
      "author": {
        "id": 1765237
      },
      "writtenOn": "2023-01-04T06:02:43Z",
      "side": 1,
      "message": "I think it is possible, but, it won\u0027t be good. because, the bitDepth should be decided at metaOnly case. but, it doesn\u0027t consider a component which is running for actual frame decoding.\nI mean, the bitDepth should be 8 even though S/W codec supports P010 format if H/W codec cannot supports P010 format.",
      "parentUuid": "b5c98c3d_35660323",
      "revId": "777077121b1aec5d13882162f75f760349fd9012",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "adfa884e_32c44c65",
        "filename": "media/libmediaplayerservice/StagefrightMetadataRetriever.cpp",
        "patchSetId": 1
      },
      "lineNbr": 242,
      "author": {
        "id": 1765237
      },
      "writtenOn": "2023-01-04T08:00:51Z",
      "side": 1,
      "message": "guide code will be as below\n//////////////////////////////\n    if (bitDepth \u003d\u003d 10) {\n        /* b/258355840\n         * 10bit thumbnail is supported since android T launching devices\n         * expecially, OMX doesn\u0027t support COLOR_FormatYUVP010\n         */\n        bool isOk \u003d true;\n        const sp\u003cIMediaCodecList\u003e list \u003d MediaCodecList::getInstance();\n        if (list !\u003d nullptr) {\n            size_t index \u003d 0;\n            for (;;) {\n                ssize_t matchIndex \u003d\n                    list-\u003efindCodecByType(mime, false /* encoder */, index);\n\n                if (matchIndex \u003c 0) {\n                    break;\n                }\n                index \u003d matchIndex + 1;\n\n                const sp\u003cMediaCodecInfo\u003e info \u003d list-\u003egetCodecInfo(matchIndex);\n                if ((info \u003d\u003d nullptr) ||\n                    (MediaCodecList::isSoftwareCodec(AString(info-\u003egetCodecName())))) {\n                    continue;\n                }\n\n                const sp\u003cMediaCodecInfo::Capabilities\u003e caps \u003d\n                        info-\u003egetCapabilitiesFor(mime);\n                if (caps \u003d\u003d nullptr) {\n                    continue;\n                }\n\n                isOk \u003d false;\n                Vector\u003cuint32_t\u003e colors;\n                caps-\u003egetSupportedColorFormats(\u0026colors);\n                for (uint32_t color : colors) {\n                    if (color \u003d\u003d COLOR_FormatYUVP010) {\n                        ALOGE(\"%s supports COLOR_FormatYUVP010.\", info-\u003egetCodecName());\n                        isOk \u003d true;\n                        break;\n                    }\n                }\n            }\n        }\n\n        if (!isOk) {\n            ALOGE(\"COLOR_FormatYUVP010 is not supported at H/W Codec. restrict to 8bit\");\n            bitDepth \u003d 8;\n        }\n    }",
      "parentUuid": "77619642_deb19d2e",
      "revId": "777077121b1aec5d13882162f75f760349fd9012",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5e52938e_35342863",
        "filename": "media/libmediaplayerservice/StagefrightMetadataRetriever.cpp",
        "patchSetId": 1
      },
      "lineNbr": 242,
      "author": {
        "id": 1018606
      },
      "writtenOn": "2023-01-06T00:21:21Z",
      "side": 1,
      "message": "At the code below (L287-L311) it knows exactly which codecs it would consider when `metaOnly \u003d false`, so I think it would be reasonable to query the codecs at `metaOnly \u003d true` case.",
      "parentUuid": "adfa884e_32c44c65",
      "revId": "777077121b1aec5d13882162f75f760349fd9012",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "58957135_87380e74",
        "filename": "media/libmediaplayerservice/StagefrightMetadataRetriever.cpp",
        "patchSetId": 1
      },
      "lineNbr": 242,
      "author": {
        "id": 1765237
      },
      "writtenOn": "2023-01-06T00:30:41Z",
      "side": 1,
      "message": "the size of matchingCodecs could be more than 1.\nand, it is possible that S/W codec is preferred an S/W codec may fail to decode a frame. and then, it will try to decode a frame with next codec which will be H/W codec. if H/W codec cannot support P010 format, the problem will be happen.\nthat is why I set the bitDepth to 8bit when H/W codec cannot support P010 format. is this reasonable?",
      "parentUuid": "5e52938e_35342863",
      "revId": "777077121b1aec5d13882162f75f760349fd9012",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}