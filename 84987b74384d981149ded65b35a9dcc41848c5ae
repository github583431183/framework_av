{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "2c7bbd0d_61c66db9",
        "filename": "media/ndk/NdkMediaCodec.cpp",
        "patchSetId": 2
      },
      "lineNbr": 473,
      "author": {
        "id": 1108919
      },
      "writtenOn": "2021-10-14T22:13:54Z",
      "side": 1,
      "message": "this doesn\u0027t let me set it back to synchronous; does that require\na codec.reset/start sequence?\n[that\u0027s a general question, not a critique of this cl]",
      "range": {
        "startLine": 473,
        "startChar": 27,
        "endLine": 473,
        "endChar": 50
      },
      "revId": "84987b74384d981149ded65b35a9dcc41848c5ae",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "cb150f02_69eb6f94",
        "filename": "media/ndk/NdkMediaCodec.cpp",
        "patchSetId": 2
      },
      "lineNbr": 473,
      "author": {
        "id": 1047003
      },
      "writtenOn": "2021-10-14T23:37:58Z",
      "side": 1,
      "message": "yes, also needs another configure()",
      "parentUuid": "2c7bbd0d_61c66db9",
      "range": {
        "startLine": 473,
        "startChar": 27,
        "endLine": 473,
        "endChar": 50
      },
      "revId": "84987b74384d981149ded65b35a9dcc41848c5ae",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c8d0daca_62b5e5f0",
        "filename": "media/ndk/NdkMediaCodec.cpp",
        "patchSetId": 2
      },
      "lineNbr": 477,
      "author": {
        "id": 1108919
      },
      "writtenOn": "2021-10-14T22:13:54Z",
      "side": 1,
      "message": "it\u0027s not clear to me why userdata has to be non-null.\nI don\u0027t see documentation saying that it has to contain anything in particular.\nIt\u0027s just a token that we\u0027re passing along and will pass back -- so the content\nis purely up to the app to decide what (if anything) it means.  and the app\nshould probably be able to say \"i want it to be null\".\n\nshould this routine be: \n\nif (mAsyncNotify\u003d\u003dnull) {\n    masyncnotify \u003d new ...\n    err \u003d mdata-\u003emcodec-\u003esetCallback()\n    if (err) { appropriate log/return }\n}\n\nmutex\nsave callback\nsave userdata\nreturn ok",
      "range": {
        "startLine": 477,
        "startChar": 8,
        "endLine": 477,
        "endChar": 27
      },
      "revId": "84987b74384d981149ded65b35a9dcc41848c5ae",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "eb0be612_38f7025c",
        "filename": "media/ndk/NdkMediaCodec.cpp",
        "patchSetId": 2
      },
      "lineNbr": 477,
      "author": {
        "id": 1047003
      },
      "writtenOn": "2021-10-14T23:37:58Z",
      "side": 1,
      "message": "Ray,\n\nuserdata is the only way applications can associate the returned data to some context in the application.\n\nAs per the following https://developer.android.com/ndk/reference/group/media#amediacodec_setasyncnotifycallback\n\n\"The specified userdata is the pointer used when those callback functions are called.\"\n\nWe can not remove (userdata !\u003d NULL) check here.",
      "parentUuid": "c8d0daca_62b5e5f0",
      "range": {
        "startLine": 477,
        "startChar": 8,
        "endLine": 477,
        "endChar": 27
      },
      "revId": "84987b74384d981149ded65b35a9dcc41848c5ae",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a4cffbb6_12e829e8",
        "filename": "media/ndk/NdkMediaCodec.cpp",
        "patchSetId": 2
      },
      "lineNbr": 477,
      "author": {
        "id": 1108919
      },
      "writtenOn": "2021-10-15T00:23:47Z",
      "side": 1,
      "message": "I get the AMediaCodec instance and the userdata in the callback, so I can\ndifferentiate between different codec instances using the AMediaCodec, if i want to do so.  It\u0027s easier if I get that info handed to me instead of inventing my own mechanism to map between AMediaCodec and something else.  But it\u0027s not required.\n\ni\u0027m not required to pass information through that userdata, the underlying mechanism doesn\u0027t impose any structure -- it\u0027s an opaque handle that is\ncompletely at the app\u0027s discretion about how to use.\n\nThe documentation does not impose any \"must be non-null\" requirements on the\nvalue that I pass through there.  Most people will likely pass some sort of structure through there, but that does not mean it is required.\n\nIn a nutshell, i agree that passing some data through userdata is very useful,\nbut it\u0027s not a requirement.",
      "parentUuid": "eb0be612_38f7025c",
      "range": {
        "startLine": 477,
        "startChar": 8,
        "endLine": 477,
        "endChar": 27
      },
      "revId": "84987b74384d981149ded65b35a9dcc41848c5ae",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}