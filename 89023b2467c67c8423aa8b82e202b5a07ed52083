{
  "comments": [
    {
      "key": {
        "uuid": "922486ae_6de6b534",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 11,
      "author": {
        "id": 1043093
      },
      "writtenOn": "2015-02-28T01:44:33Z",
      "side": 1,
      "message": "audio/video",
      "revId": "89023b2467c67c8423aa8b82e202b5a07ed52083",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "52612e1e_f9d98f1b",
        "filename": "media/libstagefright/httplive/PlaylistFetcher.cpp",
        "patchSetId": 3
      },
      "lineNbr": 746,
      "author": {
        "id": 1039918
      },
      "writtenOn": "2015-03-02T21:25:09Z",
      "side": 1,
      "message": "If we return here, the scheduled download is not done. Would this be a problem when we\u0027re low in buffer? (as down switching doesn\u0027t require 10sec buffer)\n\nCan we still handle the bandwidth check in LiveSession? PlaylistFetcher can post a notification message back to LiveSession if its buffering is over 10sec. It doesn\u0027t need to get involved in the bw checks.\n\nAlso why do we check bw before download? can we check the bw after download?",
      "revId": "89023b2467c67c8423aa8b82e202b5a07ed52083",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d2bd1ee7_77d39055",
        "filename": "media/libstagefright/httplive/PlaylistFetcher.cpp",
        "patchSetId": 3
      },
      "lineNbr": 746,
      "author": {
        "id": 1017893
      },
      "writtenOn": "2015-03-03T15:30:17Z",
      "side": 1,
      "message": "If we return here, we have detected that we need to do a configuration change to adapt to the current available bandwidth. If we would let the download continue a full segment would be downloaded before he configuration change can be done. This is needed especially if we are low in buffer, then a switch to a lower quality stream must be done as quickly as possible.\n  \nSince the PlaylistFetcher is running in the same message queue as LiveSession a bandwidth check message can only be executed in between downloads. There can be other messages delaying the execution of the message.\n\nIt would be possible to check the bw after the download. However we still need to abort before downloding if a reconfiguration is ongoing, e.g. if another fetcher has detected that a switch is required. We think it is better to keep it all in one place.",
      "parentUuid": "52612e1e_f9d98f1b",
      "revId": "89023b2467c67c8423aa8b82e202b5a07ed52083",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "92fd66c2_650ac6d9",
        "filename": "media/libstagefright/httplive/PlaylistFetcher.cpp",
        "patchSetId": 3
      },
      "lineNbr": 746,
      "author": {
        "id": 1039918
      },
      "writtenOn": "2015-03-03T19:02:25Z",
      "side": 1,
      "message": "We\u0027d like to not add new code that calls from PlaylistFetcher back into LiveSession, if possible. Currently they run on the same looper, but we\u0027re considering moving PlaylistFetcher to its own looper so that data downloading won\u0027t block control flow in LiveSession. \nThe bandwidth checking can be done in onMonitorQueue(), and PlaylistFetcher can post notification back to LiveSession when buffering is high or low. If buffering is low, PlaylistFetcher can stop scheduling new downloads.",
      "parentUuid": "d2bd1ee7_77d39055",
      "revId": "89023b2467c67c8423aa8b82e202b5a07ed52083",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}