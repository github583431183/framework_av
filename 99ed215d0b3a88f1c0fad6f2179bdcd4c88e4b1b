{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "fe6042f9_00fe7705",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1040213
      },
      "writtenOn": "2024-05-24T20:06:42Z",
      "side": 1,
      "message": "Thanks for the additional explanation.  this is a complex problem, and i have made some suggestions and thoughts for a long term fix.  i don\u0027t know if you think the suggestions can work or are comfortable doing such changes.  i am away from the office until the start of June, and can help with the change as needed then, or perhaps Shunkai can assist.\n\nAnother possibility is to merge an interim solution and then do the final fix later.  In that case, it is preferable to align the interim solution as close as possible to the exentual fix.",
      "revId": "99ed215d0b3a88f1c0fad6f2179bdcd4c88e4b1b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "dd90c334_4fb910ce",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1491204
      },
      "writtenOn": "2024-05-27T13:40:40Z",
      "side": 1,
      "message": "I tried and struggle to follow your recommandation to unlock, but I had to change so many code, even putting are risk some code section that shall not release locks (of chain / effect). Will try to reconsider.",
      "parentUuid": "fe6042f9_00fe7705",
      "revId": "99ed215d0b3a88f1c0fad6f2179bdcd4c88e4b1b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "179ab328_f5a823fb",
        "filename": "services/audioflinger/DeviceEffectManager.cpp",
        "patchSetId": 4
      },
      "lineNbr": 52,
      "author": {
        "id": 1040213
      },
      "writtenOn": "2024-05-24T20:06:42Z",
      "side": 1,
      "message": "would prefer first to unlock the mutexes before the callback.",
      "range": {
        "startLine": 50,
        "startChar": 0,
        "endLine": 52,
        "endChar": 24
      },
      "fixSuggestions": [
        {
          "fixId": "e1a765bd_66e39055",
          "description": "prompt_to_edit API",
          "replacements": [
            {
              "path": "services/audioflinger/DeviceEffectManager.cpp",
              "range": {
                "startLine": 50,
                "startChar": 0,
                "endLine": 50,
                "endChar": 0
              },
              "replacement": "    audio_utils::lock_guard _l(mutex());\n"
            },
            {
              "path": "services/audioflinger/DeviceEffectManager.cpp",
              "range": {
                "startLine": 62,
                "startChar": 0,
                "endLine": 62,
                "endChar": 0
              },
              "replacement": "    audio_utils::lock_guard _l(mutex());\n"
            }
          ]
        }
      ],
      "revId": "99ed215d0b3a88f1c0fad6f2179bdcd4c88e4b1b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5d66e41b_e68b526c",
        "filename": "services/audioflinger/DeviceEffectManager.cpp",
        "patchSetId": 4
      },
      "lineNbr": 52,
      "author": {
        "id": 1491204
      },
      "writtenOn": "2024-05-27T14:08:51Z",
      "side": 1,
      "message": "Agree, after day of struggle, I tried the async to break \"lock chain\". Will continue however, not surrending...",
      "parentUuid": "179ab328_f5a823fb",
      "range": {
        "startLine": 50,
        "startChar": 0,
        "endLine": 52,
        "endChar": 24
      },
      "revId": "99ed215d0b3a88f1c0fad6f2179bdcd4c88e4b1b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b8bf3770_fb8d675a",
        "filename": "services/audioflinger/DeviceEffectManager.cpp",
        "patchSetId": 4
      },
      "lineNbr": 52,
      "author": {
        "id": 1040213
      },
      "writtenOn": "2024-05-28T00:50:15Z",
      "side": 1,
      "message": "Thanks for your efforts!",
      "parentUuid": "5d66e41b_e68b526c",
      "range": {
        "startLine": 50,
        "startChar": 0,
        "endLine": 52,
        "endChar": 24
      },
      "revId": "99ed215d0b3a88f1c0fad6f2179bdcd4c88e4b1b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e6e1abca_997145fd",
        "filename": "services/audioflinger/DeviceEffectManager.cpp",
        "patchSetId": 4
      },
      "lineNbr": 52,
      "author": {
        "id": 1040213
      },
      "writtenOn": "2024-05-28T20:53:47Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "b8bf3770_fb8d675a",
      "range": {
        "startLine": 50,
        "startChar": 0,
        "endLine": 52,
        "endChar": 24
      },
      "revId": "99ed215d0b3a88f1c0fad6f2179bdcd4c88e4b1b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "121230c6_00b2094b",
        "filename": "services/audioflinger/Effects.h",
        "patchSetId": 4
      },
      "lineNbr": 791,
      "author": {
        "id": 1040213
      },
      "writtenOn": "2024-05-24T20:21:14Z",
      "side": 1,
      "message": "perhaps this could be changed to kEffectChain_Mutex\n\nhttps://cs.android.com/android/platform/superproject/main/+/main:system/media/audio_utils/include/audio_utils/mutex.h;drc\u003daead8b971fcfe6bdb30459501f9e605829f73b37;l\u003d67",
      "range": {
        "startLine": 791,
        "startChar": 37,
        "endLine": 791,
        "endChar": 66
      },
      "fixSuggestions": [
        {
          "fixId": "f52acd71_0f0b3a35",
          "description": "prompt_to_edit API",
          "replacements": [
            {
              "path": "services/audioflinger/Effects.h",
              "range": {
                "startLine": 791,
                "startChar": 0,
                "endLine": 792,
                "endChar": 0
              },
              "replacement": "            audio_utils::MutexOrder::kEffectChain_Mutex};\n"
            }
          ]
        }
      ],
      "revId": "99ed215d0b3a88f1c0fad6f2179bdcd4c88e4b1b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "470cb21d_4f09e9c6",
        "filename": "services/audioflinger/Effects.h",
        "patchSetId": 4
      },
      "lineNbr": 791,
      "author": {
        "id": 1040213
      },
      "writtenOn": "2024-05-28T20:53:47Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "121230c6_00b2094b",
      "range": {
        "startLine": 791,
        "startChar": 37,
        "endLine": 791,
        "endChar": 66
      },
      "revId": "99ed215d0b3a88f1c0fad6f2179bdcd4c88e4b1b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}