{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "81678781_7274b142",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1464496
      },
      "writtenOn": "2024-03-05T15:21:58Z",
      "side": 1,
      "message": "The patch was tested on AOSP 13 r79. I find it difficult to test it on the main branch, because neither the emulator from aosp_x86_64-trunk_staging-userdebug built from it works, nor running tests on the yukawa debugging board.\n\nPlease review the patch, if the idea behind it is ok, I\u0027ll spend more time on tests on the main branch.",
      "revId": "492904e1c48fe06596e87f7d6a72c3d786c9e8c8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "150868b3_3e48fe96",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1042638
      },
      "writtenOn": "2024-03-05T23:16:14Z",
      "side": 1,
      "message": "Agree that this API wrongly assumes that the primary H/W module always has an input device, which is not always true. However, returning a buffer size from a random H/W module which happens to have an input device does not seem to be much better.  For a more deterministic behavior we can fallback to the input of the remote submix module. It is required to be present in the system, and it has an input. The returned buffer size should be \u003e20ms which is fine for most uses. We can cache a pointer to it similar to how we cache the pointer to the primary module.",
      "parentUuid": "81678781_7274b142",
      "revId": "492904e1c48fe06596e87f7d6a72c3d786c9e8c8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d72d00c1_e92e46aa",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1464496
      },
      "writtenOn": "2024-03-06T07:17:56Z",
      "side": 1,
      "message": "Thanks a lot for the review. Please check the new patchset, I have added fallback to the remote submix device. By the way, where is the requirement for the remote submix to exist? Is there some CTS test?",
      "parentUuid": "150868b3_3e48fe96",
      "revId": "492904e1c48fe06596e87f7d6a72c3d786c9e8c8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9a029975_87f558ca",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1042638
      },
      "writtenOn": "2024-03-06T19:37:23Z",
      "side": 1,
      "message": "It is required by the CDD (and that means there is a CTS test verifying that requirement): https://source.android.com/docs/compatibility/14/android-14-cdd#543_capture_for_rerouting_of_playback. Thanks for asking! It seems that this device is only mandatory \"if device implementations declare both android.hardware.audio.output and android.hardware.microphone\". Thus, please add a check in `getInputBufferSize` that `dev !\u003d nullptr`. I suppose, if the device does not have means for audio input, it is OK for `getInputBufferSize` to return an error.",
      "parentUuid": "d72d00c1_e92e46aa",
      "revId": "492904e1c48fe06596e87f7d6a72c3d786c9e8c8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}