{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "be1f4966_e1ceef9a",
        "filename": "/COMMIT_MSG",
        "patchSetId": 10
      },
      "lineNbr": 13,
      "author": {
        "id": 1003259
      },
      "writtenOn": "2021-05-11T12:38:51Z",
      "side": 1,
      "message": "Do we understand the root cause of this. Even forcing a patch creation in audio policy should not cause a leak in the HAL. The Patch panel should reuse the HAL patch handle  or first release the HAL patch and then create a new one.",
      "range": {
        "startLine": 12,
        "startChar": 16,
        "endLine": 13,
        "endChar": 23
      },
      "revId": "8604c080db95eab59d4a4af10e04007bd11b4951",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "07e62ad2_9f752d1e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 10
      },
      "lineNbr": 13,
      "author": {
        "id": 1491204
      },
      "writtenOn": "2021-05-11T13:55:40Z",
      "side": 1,
      "message": "Yes, issue is for IDevice \u003c 6.0. With the introduction of updateAudioPatch API, the bug has gone.\nPatchPanel will do the job correctly.\nI will refine commit msg, this CL is for \u003e\u003d6.0 a matter of optimization.",
      "parentUuid": "be1f4966_e1ceef9a",
      "range": {
        "startLine": 12,
        "startChar": 16,
        "endLine": 13,
        "endChar": 23
      },
      "revId": "8604c080db95eab59d4a4af10e04007bd11b4951",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4c85e3dd_b19932a9",
        "filename": "/COMMIT_MSG",
        "patchSetId": 10
      },
      "lineNbr": 13,
      "author": {
        "id": 1003259
      },
      "writtenOn": "2021-05-11T15:06:01Z",
      "side": 1,
      "message": "But I thought this problem of lacking updateAudioPatch( )was taken care of by the HIDL to legacy HAL wrapper. I think it makes sense got native HIDL HAL implementations to include the same workaround.\nFixing this in APM is fine for this particular case but I can imagine there are other situations where we do not release the patch properly for HAL \u003c 6.0. We are not going to fix them all given the number of implementations that will keep running a HAL V5.0 with a system built for S or more is likely very small.",
      "parentUuid": "07e62ad2_9f752d1e",
      "range": {
        "startLine": 12,
        "startChar": 16,
        "endLine": 13,
        "endChar": 23
      },
      "revId": "8604c080db95eab59d4a4af10e04007bd11b4951",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "eeb705b9_7b857c12",
        "filename": "/COMMIT_MSG",
        "patchSetId": 10
      },
      "lineNbr": 13,
      "author": {
        "id": 1491204
      },
      "writtenOn": "2021-05-11T15:19:10Z",
      "side": 1,
      "message": "This is the reason why I even want to speak only as an optimization, as the SwOuput hosting the call has already been evaluated and can be skipped. \nFor sure, fixing in APM (more likely in PatchPanel by removing the check when patch reuse of same HwModule) all leak due to reuse of APM/Hal handle is not the goal.\nI even struggle to ensure we keep also for SwOutput involved in bridge same APM handle. \nLet s say that path garbage collector for HAL \u003c 6.0 is likely to be implemented by checking ports involved. This is the way I did in my former intel HAL implementation.\nI can provide a fix in native HIDL HAL if you wish.",
      "parentUuid": "4c85e3dd_b19932a9",
      "range": {
        "startLine": 12,
        "startChar": 16,
        "endLine": 13,
        "endChar": 23
      },
      "revId": "8604c080db95eab59d4a4af10e04007bd11b4951",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "361b60c4_364f0826",
        "filename": "/COMMIT_MSG",
        "patchSetId": 10
      },
      "lineNbr": 13,
      "author": {
        "id": 1003259
      },
      "writtenOn": "2021-05-11T15:21:48Z",
      "side": 1,
      "message": "let\u0027s keep this as an optimization. The new commit message is clear enough, Thanks.",
      "parentUuid": "eeb705b9_7b857c12",
      "range": {
        "startLine": 12,
        "startChar": 16,
        "endLine": 13,
        "endChar": 23
      },
      "revId": "8604c080db95eab59d4a4af10e04007bd11b4951",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9d6b2527_62b9c2d8",
        "filename": "services/audiopolicy/managerdefault/AudioPolicyManager.h",
        "patchSetId": 10
      },
      "lineNbr": 586,
      "author": {
        "id": 1003259
      },
      "writtenOn": "2021-05-11T12:38:51Z",
      "side": 1,
      "message": "there is nothing telephony specific in the method implementation. May be rename to isAudioSourceOnOutput",
      "range": {
        "startLine": 586,
        "startChar": 13,
        "endLine": 586,
        "endChar": 30
      },
      "revId": "8604c080db95eab59d4a4af10e04007bd11b4951",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "eb125b49_03469726",
        "filename": "services/audiopolicy/managerdefault/AudioPolicyManager.h",
        "patchSetId": 10
      },
      "lineNbr": 586,
      "author": {
        "id": 1491204
      },
      "writtenOn": "2021-05-11T13:55:40Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9d6b2527_62b9c2d8",
      "range": {
        "startLine": 586,
        "startChar": 13,
        "endLine": 586,
        "endChar": 30
      },
      "revId": "8604c080db95eab59d4a4af10e04007bd11b4951",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}