{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "66b9851e_a7b54f4b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 8
      },
      "lineNbr": 0,
      "author": {
        "id": 1108919
      },
      "writtenOn": "2021-04-22T00:10:30Z",
      "side": 1,
      "message": "removing this means that it breaks for a 64-bit mediaserver on a system where we have OMX codecs.\n\npixels have gone all Codec2, so it works for them. But this would impact other OEMs who still use OMX codecs.\n\nwe still need to figure a better solution here.",
      "revId": "2388438c2f701fea8ff5a4e2d672dfa8df64eb5c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "120dfa06_200f8d36",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 8
      },
      "lineNbr": 0,
      "author": {
        "id": 1047003
      },
      "writtenOn": "2021-04-22T00:28:45Z",
      "side": 1,
      "message": "Ray,\nIn my last tests on Pixel 3, issue wasn\u0027t really with omx codecs but was with the input surface.\nwhen debug.stagefright.c2inputsurface is 0, 64 bit mediaserver didn\u0027t work.\nBut with debug.stagefright.c2inputsurface set to -1, even OMX codecs worked as expected with 64bit mediaserver. \nI will test this again.\nI will also see how this CL can be updated to throw an error when mediaserver runs as 64 bit but debug.stagefright.c2inputsurface is 0.",
      "parentUuid": "66b9851e_a7b54f4b",
      "revId": "2388438c2f701fea8ff5a4e2d672dfa8df64eb5c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6e2eff80_d2446b34",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 8
      },
      "lineNbr": 0,
      "author": {
        "id": 1047003
      },
      "writtenOn": "2021-05-03T01:54:24Z",
      "side": 1,
      "message": "Ray,\nInstead of removing the check in Codec2Buffer.cpp completely, I have updated it to fail in 64bit builds on 32bit + 64bit devices if debug.stagefright.c2inputsurface is 0.\nWith this on Pixel 3, I have verified that Qcom h/w codecs work with 64 bit mediaserver when debug.stagefright.c2inputsurface is -1.",
      "parentUuid": "120dfa06_200f8d36",
      "revId": "2388438c2f701fea8ff5a4e2d672dfa8df64eb5c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4c964739_25604ac4",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 8
      },
      "lineNbr": 0,
      "author": {
        "id": 1108919
      },
      "writtenOn": "2021-05-03T16:57:47Z",
      "side": 1,
      "message": "the problem I have here is that this is a runtime decision.\nif the c2inputsurface setting is not -1, then the mediaserver is broken\n(some camera functions will fail).  And the user doesn\u0027t have any recourse at that point.\n\nMy goal is a solution where we know at compile time that it will always work.",
      "parentUuid": "6e2eff80_d2446b34",
      "revId": "2388438c2f701fea8ff5a4e2d672dfa8df64eb5c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6590f0d7_1fdd4901",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 8
      },
      "lineNbr": 0,
      "author": {
        "id": 1047003
      },
      "writtenOn": "2021-05-04T16:22:11Z",
      "side": 1,
      "message": "Ray,\nIn order to make it as simple as possible to switch to 64 bit mediaserver at a later date, I have split this CL into two CLs.\nChanges in Codec2Buffer.cpp are now in https://android-review.googlesource.com/c/platform/frameworks/av/+/1684305.\nThat change can be merged without switching mediaserver to 64bit.\nOnce that is merged, only change that is needed to switch to 64bit is to remove compile_multilib from mediaserver\u0027s Android.bp. This change can be merged whenever appropriate later.",
      "parentUuid": "4c964739_25604ac4",
      "revId": "2388438c2f701fea8ff5a4e2d672dfa8df64eb5c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}