{
  "comments": [
    {
      "key": {
        "uuid": "d7c9e645_45a1297a",
        "filename": "media/libstagefright/MPEG4Writer.cpp",
        "patchSetId": 1
      },
      "lineNbr": 3294,
      "author": {
        "id": 1040213
      },
      "writtenOn": "2016-12-30T02:45:56Z",
      "side": 1,
      "message": "as i understand it, this could be UINT32_MAX, as the duration is considered unsigned.",
      "range": {
        "startLine": 3294,
        "startChar": 23,
        "endLine": 3294,
        "endChar": 32
      },
      "revId": "5d5f48866529c173103c4b6405e6c078776b8a93",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "17961e08_8313e241",
        "filename": "media/libstagefright/MPEG4Writer.cpp",
        "patchSetId": 1
      },
      "lineNbr": 3294,
      "author": {
        "id": 1105578
      },
      "writtenOn": "2016-12-30T02:52:24Z",
      "side": 1,
      "message": "but even you change the type from int32 to uint32, it still overflows when you call writeInt32(), as MPEG4 has the version 1 mdhd definition, I think it is better to use int64 in case of recording longer time.",
      "parentUuid": "d7c9e645_45a1297a",
      "range": {
        "startLine": 3294,
        "startChar": 23,
        "endLine": 3294,
        "endChar": 32
      },
      "revId": "5d5f48866529c173103c4b6405e6c078776b8a93",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d7c9e645_58c7c759",
        "filename": "media/libstagefright/MPEG4Writer.cpp",
        "patchSetId": 1
      },
      "lineNbr": 3294,
      "author": {
        "id": 1001525
      },
      "writtenOn": "2017-01-03T16:42:16Z",
      "side": 1,
      "message": "Not sure I follow. All of the values in the mdhd box are unsigned, regardless of whether it\u0027s version 0 or 1, so if the duration is \u003c\u003d UINT32_MAX it can be written as a version 0 box.\nThat being said, how about always writing a version 1 box? Is there any reason (other than saving 12 bytes) to write a version 0 box?",
      "parentUuid": "17961e08_8313e241",
      "range": {
        "startLine": 3294,
        "startChar": 23,
        "endLine": 3294,
        "endChar": 32
      },
      "revId": "5d5f48866529c173103c4b6405e6c078776b8a93",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d7c9e645_a9cc5f4d",
        "filename": "media/libstagefright/MPEG4Writer.cpp",
        "patchSetId": 1
      },
      "lineNbr": 3294,
      "author": {
        "id": 1040213
      },
      "writtenOn": "2017-01-03T19:21:51Z",
      "side": 1,
      "message": "marco: would a version 0 box (aside from being slightly more compact :-) be considered more compatible with early players?\n\nxiahong: yes, it will still eventually overflow for UINT32_MAX, but it might be more appropriate for the check.  int32 and uint32 are compatible as the cast does not change the bit representation for 2\u0027s complement processors; the casting will not trigger an integer sanitization abort either.",
      "parentUuid": "d7c9e645_58c7c759",
      "range": {
        "startLine": 3294,
        "startChar": 23,
        "endLine": 3294,
        "endChar": 32
      },
      "revId": "5d5f48866529c173103c4b6405e6c078776b8a93",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}