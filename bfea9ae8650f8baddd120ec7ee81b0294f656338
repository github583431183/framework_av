{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "1efb8ec3_22fac905",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1993856
      },
      "writtenOn": "2023-03-14T02:27:30Z",
      "side": 1,
      "message": "done",
      "revId": "bfea9ae8650f8baddd120ec7ee81b0294f656338",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f7abcb0d_7b399cf3",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1956242
      },
      "writtenOn": "2023-03-14T03:46:32Z",
      "side": 1,
      "message": "Thanks for submitting the CL!\nI\u0027m afraid I need to understand this bug 272310212 more, if the issue was caused by previous test case didn\u0027t cleanup the state correctly (release the bundle effect context), adding a reference counter seems to be a work-around to me.\nIs there a way to reproduce this? If yes I will try to find some time this week to reproduce and get back to you. Thanks.",
      "revId": "bfea9ae8650f8baddd120ec7ee81b0294f656338",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b43fc5a5_26b4bb91",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1956242
      },
      "writtenOn": "2023-03-14T03:48:13Z",
      "side": 1,
      "message": "Also please leave a blank line in the commit message after first line, thanks",
      "revId": "bfea9ae8650f8baddd120ec7ee81b0294f656338",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f90d8aad_6c1ba424",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1993856
      },
      "writtenOn": "2023-03-14T04:41:16Z",
      "side": 1,
      "message": "yes it can be reproduce with the loop-test.sh script attached in the bug, you can have a try",
      "parentUuid": "f7abcb0d_7b399cf3",
      "revId": "bfea9ae8650f8baddd120ec7ee81b0294f656338",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a4282cab_425b8a28",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1993856
      },
      "writtenOn": "2023-03-20T02:25:37Z",
      "side": 1,
      "message": "Hi Shunkai，have you reproduced the problem？ or any update？",
      "parentUuid": "f90d8aad_6c1ba424",
      "revId": "bfea9ae8650f8baddd120ec7ee81b0294f656338",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b9a29b99_b9681dda",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1956242
      },
      "writtenOn": "2023-03-20T23:30:32Z",
      "side": 1,
      "message": "Thanks for sharing your script with me. I noticed that you didn\u0027t stop the audioServer before running vts in the script. This will lead to the parallel access to the same audio HAL.\n\nI suggest you try using [atest](https://source.android.com/docs/core/tests/development/atest) instead. atest has several advantages including:\n- It does several necessary preparations before running vts test cases automatically.\n- It provides a set of helpful parameters, such as `--iterations` and `--rerun-until-failure`.\n\nI think I\u0027m not against this cl, it\u0027s making bundle more robust, but as Eric and Mikhail pointed out in [other comment](https://android-review.git.corp.google.com/c/platform/frameworks/av/+/2478943/comments/a1a7b9c3_ad358b0e), seems we\u0027re trying to handle an invalid use case with this patch. I suggest you think about changing the way of vts testing if possible.\nLet me know if this make sense or not.",
      "parentUuid": "a4282cab_425b8a28",
      "revId": "bfea9ae8650f8baddd120ec7ee81b0294f656338",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a73e563d_9a90ffec",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1993856
      },
      "writtenOn": "2023-03-22T02:39:17Z",
      "side": 1,
      "message": "Hi Shunkai，everytime the android.hardware.audio.service crashed，the system will reboot it and reboot audioserver process at the same time. You can find the audioserver process pid is changed in elog.1 and elog.2 attached in the bug，so the test script needn\u0027t to reboot audioserver. Also you can have a test that when android.hardware.audio.service is killed manually， both android.hardware.audio.service and audioserver will reboot automaticly.\n\nOur testers run CTS/VTS cases every week. During the running of the VTS test suite, our testers have reported this issue multiple times. As it was an intermittent problem, in order to reproduce the testers\u0027 observation, the script was written to conduct stress testing and reproduce the testers\u0027 problem.\n\nI do not have the account to access the comment you give out. \nThe crash is not from the test script , but is a real exist problem from VTS. I agree that the crash will almost not happend if user run their music apps with effect, as users do not have the opportunity to frequently create and release effects through the app，so the problem almost will not happen in real world.\n\nThe carsh maybe only comes from the vts test. So do we need to fix the crash from vts test?",
      "parentUuid": "b9a29b99_b9681dda",
      "revId": "bfea9ae8650f8baddd120ec7ee81b0294f656338",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7c55e5ab_a21ab95d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1993856
      },
      "writtenOn": "2023-03-22T03:22:05Z",
      "side": 1,
      "message": "In addition, our testers use the command bellow to test VTS every week:\n./vts-tradefed run commandAndExit vts --logcat-on-failure --bugreport-on-failure\nand change the bug repeat times from Occasional to Sometimes.",
      "parentUuid": "a73e563d_9a90ffec",
      "revId": "bfea9ae8650f8baddd120ec7ee81b0294f656338",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "68cb4a56_d79fa07b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1956242
      },
      "writtenOn": "2023-03-22T16:54:14Z",
      "side": 1,
      "message": "Hi, I provided answer in bug 272310212 to capture these discussions.",
      "parentUuid": "7c55e5ab_a21ab95d",
      "revId": "bfea9ae8650f8baddd120ec7ee81b0294f656338",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "912c0d83_56ee13d0",
        "filename": "media/libeffects/lvm/wrapper/Bundle/EffectBundle.cpp",
        "patchSetId": 2
      },
      "lineNbr": 314,
      "author": {
        "id": 1956242
      },
      "writtenOn": "2023-03-14T03:46:32Z",
      "side": 1,
      "message": "nit: I think we should merge  line#220 line#274 and update `nBundledEffectsEnableCount` only when success, less chance to get wrong with error handling logic.\nSame for the `nBundledEffectsEnableCount -\u003d 1` in EffectRelease",
      "range": {
        "startLine": 314,
        "startChar": 8,
        "endLine": 314,
        "endChar": 70
      },
      "revId": "bfea9ae8650f8baddd120ec7ee81b0294f656338",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d65611f8_f3a441cb",
        "filename": "media/libeffects/lvm/wrapper/Bundle/EffectBundle.cpp",
        "patchSetId": 2
      },
      "lineNbr": 314,
      "author": {
        "id": 1993856
      },
      "writtenOn": "2023-03-14T08:54:59Z",
      "side": 1,
      "message": "merged and test with script for",
      "parentUuid": "912c0d83_56ee13d0",
      "range": {
        "startLine": 314,
        "startChar": 8,
        "endLine": 314,
        "endChar": 70
      },
      "revId": "bfea9ae8650f8baddd120ec7ee81b0294f656338",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}