{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "fe7e5e00_8d6e1454",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1047003
      },
      "writtenOn": "2021-04-02T22:24:09Z",
      "side": 1,
      "message": "Sungtak,\nThis CL adds a .clang-format that can be used to enforce formatting of the code in C2 VTS tests.\nCan you please review and submit?\n",
      "revId": "b58afa74d3bc8c2bf3696f8b2f73a0c3c2d1b308",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c992435f_c72a7bd8",
        "filename": "media/codec2/hidl/1.0/vts/.clang-format",
        "patchSetId": 1
      },
      "lineNbr": 1,
      "author": {
        "id": 1156740
      },
      "writtenOn": "2021-04-02T22:36:21Z",
      "side": 1,
      "message": "Instead of including(referring), defining here is better.\n\ne.g) frameworks/av/services/mediatranscoding/.clang-format , frameworks/av/media/tests/benchmark/.clang-format",
      "revId": "b58afa74d3bc8c2bf3696f8b2f73a0c3c2d1b308",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ff306b94_41b58c95",
        "filename": "media/codec2/hidl/1.0/vts/.clang-format",
        "patchSetId": 1
      },
      "lineNbr": 1,
      "author": {
        "id": 1047003
      },
      "writtenOn": "2021-04-02T22:49:03Z",
      "side": 1,
      "message": "Sungtak,\nIt seems including a symbolic link is the preferred way now.\nPlease refer to the discussion at\nhttps://android-review.googlesource.com/c/platform/frameworks/av/+/1443655/4..5/media/libeffects/lvm/.clang-format#b17\n\nIf the default format can be used, then that is the preferred approach, as per the above discussion.\n\nPlease let me know if you still prefer to define it here.",
      "parentUuid": "c992435f_c72a7bd8",
      "revId": "b58afa74d3bc8c2bf3696f8b2f73a0c3c2d1b308",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "086f3fdc_a7572153",
        "filename": "media/codec2/hidl/1.0/vts/.clang-format",
        "patchSetId": 1
      },
      "lineNbr": 1,
      "author": {
        "id": 1047003
      },
      "writtenOn": "2021-04-02T23:03:46Z",
      "side": 1,
      "message": "https://android-review.googlesource.com/c/platform/build/soong/+/878618 is the CL where the system-clang-format was added and CLs in that topic branch show few folders using this central system-clang-format",
      "parentUuid": "ff306b94_41b58c95",
      "revId": "b58afa74d3bc8c2bf3696f8b2f73a0c3c2d1b308",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e1a3b97d_1223f012",
        "filename": "media/codec2/hidl/1.0/vts/.clang-format",
        "patchSetId": 1
      },
      "lineNbr": 1,
      "author": {
        "id": 1156740
      },
      "writtenOn": "2021-04-03T01:15:39Z",
      "side": 1,
      "message": "Steven, could this be a recommended practice?",
      "parentUuid": "086f3fdc_a7572153",
      "revId": "b58afa74d3bc8c2bf3696f8b2f73a0c3c2d1b308",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "83a2d318_7d874232",
        "filename": "media/codec2/hidl/1.0/vts/.clang-format",
        "patchSetId": 1
      },
      "lineNbr": 1,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2021-04-03T01:30:24Z",
      "side": 1,
      "message": "I think it\u0027s great, though:\n- this should also add a PREUPLOAD.cfg - currently there is nothing enforcing that clang-format is used automatically (and usually, an incremental clang-format is preferred - it makes it easier to code review, and helps with merge conflicts, though that\u0027s up to you)\n- I\u0027m not sure if anything else in frameworks/av uses another format. If it does, then this might want to use that as well. For instance frameworks/native has a different clang format.\n- it might be better to add the format in a higher directory (maybe even frameworks/av) and apply it everywhere, rather than having such specific configuration in this small subdirectory",
      "parentUuid": "e1a3b97d_1223f012",
      "revId": "b58afa74d3bc8c2bf3696f8b2f73a0c3c2d1b308",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "adfa8a29_3924e9cd",
        "filename": "media/codec2/hidl/1.0/vts/.clang-format",
        "patchSetId": 1
      },
      "lineNbr": 1,
      "author": {
        "id": 1047003
      },
      "writtenOn": "2021-04-05T03:22:08Z",
      "side": 1,
      "message": "Steven,\nThanks for the review comments.\n\n- PREUPLOAD.cfg in frameworks/av in aosp/master and internal branches have diverged now and that means the one in aosp/master can\u0027t be updated currently till the internal changes are merged to aosp/master. For the time being we will manually format before uploading (till we get a way to add this in PREUPLOAD.cfg by uploading a CL that can be cherry-picked to internal branches)\n\n- Since C2 VTS tests are undergoing some refactoring, this is a good time to format everything once and use that as a baseline (anyway not many lines actually change in this CL). For rest of the source files, when clang-format can be added to the hooks, it will be done as an incremental clang-format as you have suggested.\n\n- frameworks/av is a large repo with lots of code, not sure if we can come up with a common format that works across all of them. We will probably start with frameworks/av/media/codec2 first.\n\nSungtak,\nOnce this is submitted, I will upload a CL on partner gerrit to update PREUPLOAD.cfg.",
      "parentUuid": "83a2d318_7d874232",
      "revId": "b58afa74d3bc8c2bf3696f8b2f73a0c3c2d1b308",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}