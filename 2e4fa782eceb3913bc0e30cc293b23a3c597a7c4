{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "4f6bb8c4_ada70c7d",
        "filename": "services/audiopolicy/config/r_submix_audio_policy_configuration.xml",
        "patchSetId": 1
      },
      "lineNbr": 20,
      "author": {
        "id": 1042638
      },
      "writtenOn": "2023-01-17T21:50:10Z",
      "side": 1,
      "message": "I remember I have tried doing that previously. The issue was that audioflinger immediately tried opening this output on start, because it automatically opens streams to all attached devices. However, since writing to remote submix is blocked on reading from it by apps, writing wasn\u0027t going as expected. We need to check how this works now, if the issue I mentioned still exists, we might need to re-classify remote submix output as \"detachable\" in device types.",
      "range": {
        "startLine": 20,
        "startChar": 0,
        "endLine": 20,
        "endChar": 38
      },
      "revId": "2e4fa782eceb3913bc0e30cc293b23a3c597a7c4",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b59bb7a3_25db1794",
        "filename": "services/audiopolicy/config/r_submix_audio_policy_configuration.xml",
        "patchSetId": 1
      },
      "lineNbr": 20,
      "author": {
        "id": 1945984
      },
      "writtenOn": "2023-01-18T06:27:37Z",
      "side": 1,
      "message": "Tested this CL on HIDL HAL on AOSP and master, and there were no fatal errors, but I was unable to play media. Media is routed to the attached device, which is Remote Submix Out, with this config.\n\n@elaurent@google.com What do you think about reclassifying Remote Submix Out as a detachable device, as Mikhail mentioned above?\nCurrently, we mark it as an attached device by populating the AudioDeviceDescription::connection field with an empty string.\nhttps://cs.android.com/android/platform/superproject/+/master:frameworks/av/media/audioaidlconversion/AidlConversionCppNdk.cpp;l\u003d497;drc\u003d512025079d6dfa902f02b4484ff662b890497f23",
      "parentUuid": "4f6bb8c4_ada70c7d",
      "range": {
        "startLine": 20,
        "startChar": 0,
        "endLine": 20,
        "endChar": 38
      },
      "revId": "2e4fa782eceb3913bc0e30cc293b23a3c597a7c4",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "db99f72c_33e6007f",
        "filename": "services/audiopolicy/config/r_submix_audio_policy_configuration.xml",
        "patchSetId": 1
      },
      "lineNbr": 20,
      "author": {
        "id": 1003259
      },
      "writtenOn": "2023-01-18T09:24:01Z",
      "side": 1,
      "message": "The remote submix out should not be attached. It is connected by the APM only when an active capture is detected for the same dynamic audio policy.\nWhy would you like to change this?",
      "parentUuid": "b59bb7a3_25db1794",
      "range": {
        "startLine": 20,
        "startChar": 0,
        "endLine": 20,
        "endChar": 38
      },
      "revId": "2e4fa782eceb3913bc0e30cc293b23a3c597a7c4",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "21f8d8db_c2b866c5",
        "filename": "services/audiopolicy/config/r_submix_audio_policy_configuration.xml",
        "patchSetId": 1
      },
      "lineNbr": 20,
      "author": {
        "id": 1945984
      },
      "writtenOn": "2023-01-18T17:19:51Z",
      "side": 1,
      "message": "I don\u0027t want to change it. The framework already classifies it as a permanently attached device.\nSee\n\nhttp://cs/android/system/hardware/interfaces/media/aidl/android/media/audio/common/AudioDeviceDescription.aidl;l\u003d45;rcl\u003d9dd93d47a6982cc13e7cac666537323fb2800c78\n\nand\n\nhttps://cs.android.com/android/platform/superproject/+/master:frameworks/av/media/audioaidlconversion/AidlConversionCppNdk.cpp;l\u003d497;drc\u003d512025079d6dfa902f02b4484ff662b890497f23\n\nMikhail is proposing to fix this, since it is not permanently attached as you said.",
      "parentUuid": "db99f72c_33e6007f",
      "range": {
        "startLine": 20,
        "startChar": 0,
        "endLine": 20,
        "endChar": 38
      },
      "revId": "2e4fa782eceb3913bc0e30cc293b23a3c597a7c4",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}