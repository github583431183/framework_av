{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "2acc2229_51552fa4",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 16
      },
      "lineNbr": 0,
      "author": {
        "id": 1962660
      },
      "writtenOn": "2023-02-28T17:02:43Z",
      "side": 1,
      "message": "Is there plans to integrate the same logic into ExoPlayer\u0027s TS extractor as well?",
      "revId": "5ce1e5a9ed9dc91d3fbce37b1163da4fcef1f17e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e9b6170f_a0a3573d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 16
      },
      "lineNbr": 0,
      "author": {
        "id": 1659435
      },
      "writtenOn": "2023-03-01T14:19:08Z",
      "side": 1,
      "message": "I believe it should be done, but I\u0027ll let @tonihei@google.com coordinate what needs to be done and how.",
      "parentUuid": "2acc2229_51552fa4",
      "revId": "5ce1e5a9ed9dc91d3fbce37b1163da4fcef1f17e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1f49d8dc_3d4b7ee8",
        "filename": "media/module/mpeg2ts/ESQueue.cpp",
        "patchSetId": 16
      },
      "lineNbr": 370,
      "author": {
        "id": 1962660
      },
      "writtenOn": "2023-02-28T17:02:43Z",
      "side": 1,
      "message": "I don\u0027t see much advantage of using this macro. In my opinion it makes the code unreadable at some instances. For consistency, we should either use this macro at all places in this file or not use at all.",
      "range": {
        "startLine": 365,
        "startChar": 0,
        "endLine": 370,
        "endChar": 0
      },
      "revId": "5ce1e5a9ed9dc91d3fbce37b1163da4fcef1f17e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e26d2a97_b77820cb",
        "filename": "media/module/mpeg2ts/ESQueue.cpp",
        "patchSetId": 16
      },
      "lineNbr": 370,
      "author": {
        "id": 1659435
      },
      "writtenOn": "2023-03-01T14:19:08Z",
      "side": 1,
      "message": "I have to respectful disagree a bit here ðŸ˜Š. This macro replaces 4 lines of code. The DTS parsing is actually more complex and lengthier than the EAC3 one. Using the macro shortens the boilerplate code, adds more safety checks and with the additional break lines separation it\u0027s readable. This is the first time it was needed and introduced, if we want to use it in other parts of the file, sure, but it should be done in a separate CL and not mix DTS implementation with refactor. Will keep it for now.",
      "parentUuid": "1f49d8dc_3d4b7ee8",
      "range": {
        "startLine": 365,
        "startChar": 0,
        "endLine": 370,
        "endChar": 0
      },
      "revId": "5ce1e5a9ed9dc91d3fbce37b1163da4fcef1f17e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fe6e3600_2fe43344",
        "filename": "media/module/mpeg2ts/ESQueue.cpp",
        "patchSetId": 16
      },
      "lineNbr": 370,
      "author": {
        "id": 1962660
      },
      "writtenOn": "2023-03-01T16:58:24Z",
      "side": 1,
      "message": "It seems that creating new macros is discouraged due to various reasons(yaqs/7366664134424788992). Would at least recommend to use a project-specific prefix in the name.",
      "parentUuid": "e26d2a97_b77820cb",
      "range": {
        "startLine": 365,
        "startChar": 0,
        "endLine": 370,
        "endChar": 0
      },
      "revId": "5ce1e5a9ed9dc91d3fbce37b1163da4fcef1f17e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "85b16d86_9b5397f5",
        "filename": "media/module/mpeg2ts/ESQueue.cpp",
        "patchSetId": 16
      },
      "lineNbr": 370,
      "author": {
        "id": 1021605
      },
      "writtenOn": "2023-03-01T17:17:14Z",
      "side": 1,
      "message": "We do use macros in media code when it makes the code easier to maintain / read.",
      "parentUuid": "fe6e3600_2fe43344",
      "range": {
        "startLine": 365,
        "startChar": 0,
        "endLine": 370,
        "endChar": 0
      },
      "revId": "5ce1e5a9ed9dc91d3fbce37b1163da4fcef1f17e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ed432b31_5058f34c",
        "filename": "media/module/mpeg2ts/ESQueue.cpp",
        "patchSetId": 16
      },
      "lineNbr": 370,
      "author": {
        "id": 1962660
      },
      "writtenOn": "2023-03-01T17:45:54Z",
      "side": 1,
      "message": "Acknowledged. Do you think we should add a project-specific prefix or is it fine as is?",
      "parentUuid": "85b16d86_9b5397f5",
      "range": {
        "startLine": 365,
        "startChar": 0,
        "endLine": 370,
        "endChar": 0
      },
      "revId": "5ce1e5a9ed9dc91d3fbce37b1163da4fcef1f17e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "871e2d0f_bedcc700",
        "filename": "media/module/mpeg2ts/ESQueue.cpp",
        "patchSetId": 16
      },
      "lineNbr": 372,
      "author": {
        "id": 1962660
      },
      "writtenOn": "2023-02-28T17:02:43Z",
      "side": 1,
      "message": "Function name should be lowerCamelCase as per go/androidcstyleguide. Please also fix other function names.",
      "range": {
        "startLine": 372,
        "startChar": 16,
        "endLine": 372,
        "endChar": 35
      },
      "revId": "5ce1e5a9ed9dc91d3fbce37b1163da4fcef1f17e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b68733ae_3de0960b",
        "filename": "media/module/mpeg2ts/ESQueue.cpp",
        "patchSetId": 16
      },
      "lineNbr": 372,
      "author": {
        "id": 1962660
      },
      "writtenOn": "2023-02-28T17:02:43Z",
      "side": 1,
      "message": "I believe parsing logic can be made more readable by using line breaks correctly. For example you can look at above method parseEAC3SyncFrame.",
      "range": {
        "startLine": 372,
        "startChar": 0,
        "endLine": 372,
        "endChar": 36
      },
      "revId": "5ce1e5a9ed9dc91d3fbce37b1163da4fcef1f17e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f5e3c1cc_f31d9d03",
        "filename": "media/module/mpeg2ts/ESQueue.cpp",
        "patchSetId": 16
      },
      "lineNbr": 372,
      "author": {
        "id": 1659435
      },
      "writtenOn": "2023-03-01T14:19:08Z",
      "side": 1,
      "message": "Done. DTSHD AND DTSUHD are bitstream names, similar with AC3 and EAC3, left them uppercase.",
      "parentUuid": "871e2d0f_bedcc700",
      "range": {
        "startLine": 372,
        "startChar": 16,
        "endLine": 372,
        "endChar": 35
      },
      "revId": "5ce1e5a9ed9dc91d3fbce37b1163da4fcef1f17e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5819a380_a6ecaad0",
        "filename": "media/module/mpeg2ts/ESQueue.cpp",
        "patchSetId": 16
      },
      "lineNbr": 372,
      "author": {
        "id": 1659435
      },
      "writtenOn": "2023-03-01T14:19:08Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b68733ae_3de0960b",
      "range": {
        "startLine": 372,
        "startChar": 0,
        "endLine": 372,
        "endChar": 36
      },
      "revId": "5ce1e5a9ed9dc91d3fbce37b1163da4fcef1f17e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b533e5e7_e61d8358",
        "filename": "media/module/mpeg2ts/ESQueue.cpp",
        "patchSetId": 16
      },
      "lineNbr": 372,
      "author": {
        "id": 1962660
      },
      "writtenOn": "2023-03-01T16:58:24Z",
      "side": 1,
      "message": "I understand how previously we have written AC3 and EAC3 in all caps which is incorrect. go/cstyle#General_Naming_Rules states: For names written in mixed case (also sometimes referred to as \"camel case\" or \"Pascal case\"), in which the first letter of each word is capitalized, prefer to capitalize abbreviations as single words, e.g., StartRpc() rather than StartRPC().\n\nIn the case of DTSHD or DTSUHD it is hard to know when one word ends and the other starts. I would recommend following the convention here.",
      "parentUuid": "f5e3c1cc_f31d9d03",
      "range": {
        "startLine": 372,
        "startChar": 16,
        "endLine": 372,
        "endChar": 35
      },
      "revId": "5ce1e5a9ed9dc91d3fbce37b1163da4fcef1f17e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "54e2a993_846deb0c",
        "filename": "media/module/mpeg2ts/ESQueue.cpp",
        "patchSetId": 16
      },
      "lineNbr": 372,
      "author": {
        "id": 1021605
      },
      "writtenOn": "2023-03-01T17:17:14Z",
      "side": 1,
      "message": "Note that stagefright/media C++ code follows/ed the capitalization rule of capital first letter for static methods, although we don\u0027t judiciously enforce it.\n\nBTW, this would be ParseDtsHdSyncFrame but many other instances keep the all-caps, so we strive for consistence here.",
      "parentUuid": "b533e5e7_e61d8358",
      "range": {
        "startLine": 372,
        "startChar": 16,
        "endLine": 372,
        "endChar": 35
      },
      "revId": "5ce1e5a9ed9dc91d3fbce37b1163da4fcef1f17e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "283a3481_7186c383",
        "filename": "media/module/mpeg2ts/ESQueue.cpp",
        "patchSetId": 16
      },
      "lineNbr": 372,
      "author": {
        "id": 1962660
      },
      "writtenOn": "2023-03-01T17:45:54Z",
      "side": 1,
      "message": "Thank you for letting me know the convention. It was hard to find one convention guidelines we follow throughout.",
      "parentUuid": "54e2a993_846deb0c",
      "range": {
        "startLine": 372,
        "startChar": 16,
        "endLine": 372,
        "endChar": 35
      },
      "revId": "5ce1e5a9ed9dc91d3fbce37b1163da4fcef1f17e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b6223602_bb854e53",
        "filename": "media/module/mpeg2ts/ESQueue.cpp",
        "patchSetId": 16
      },
      "lineNbr": 387,
      "author": {
        "id": 1962660
      },
      "writtenOn": "2023-02-28T17:02:43Z",
      "side": 1,
      "message": "I think line break can be used here to segregate between different parts of code. For example, there can be a line break introduced after the constants is defined and one after initialisation is done. This will make the code more readable. Same can be applied to methods below.",
      "range": {
        "startLine": 383,
        "startChar": 2,
        "endLine": 387,
        "endChar": 31
      },
      "revId": "5ce1e5a9ed9dc91d3fbce37b1163da4fcef1f17e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e3b858e0_ec081835",
        "filename": "media/module/mpeg2ts/ESQueue.cpp",
        "patchSetId": 16
      },
      "lineNbr": 387,
      "author": {
        "id": 1659435
      },
      "writtenOn": "2023-03-01T14:19:08Z",
      "side": 1,
      "message": "Done. Added line breaks to improve readability.",
      "parentUuid": "b6223602_bb854e53",
      "range": {
        "startLine": 383,
        "startChar": 2,
        "endLine": 387,
        "endChar": 31
      },
      "revId": "5ce1e5a9ed9dc91d3fbce37b1163da4fcef1f17e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a0dc6e36_64360eb1",
        "filename": "media/module/mpeg2ts/ESQueue.cpp",
        "patchSetId": 16
      },
      "lineNbr": 395,
      "author": {
        "id": 1962660
      },
      "writtenOn": "2023-02-28T17:02:43Z",
      "side": 1,
      "message": "I think we don\u0027t need this check here and can be moved as an else part to the if condition below. \n\nif (dtshdSyncWord \u003d\u003d DTSHD_SYNC_CORE_16BIT_BE) { // DTS Digital Surround Header\n} else if (dtshdSyncWord \u003d\u003d DTSHD_SYNC_EXSS_16BIT_BE) { // DTS Express(LBR) Header\n} else {\n    return ERROR_MALFORMED;\n}",
      "range": {
        "startLine": 392,
        "startChar": 4,
        "endLine": 395,
        "endChar": 5
      },
      "revId": "5ce1e5a9ed9dc91d3fbce37b1163da4fcef1f17e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b9cc6d18_1dc9540c",
        "filename": "media/module/mpeg2ts/ESQueue.cpp",
        "patchSetId": 16
      },
      "lineNbr": 395,
      "author": {
        "id": 1659435
      },
      "writtenOn": "2023-03-01T14:19:08Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a0dc6e36_64360eb1",
      "range": {
        "startLine": 392,
        "startChar": 4,
        "endLine": 395,
        "endChar": 5
      },
      "revId": "5ce1e5a9ed9dc91d3fbce37b1163da4fcef1f17e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "293fa75f_3abc22c0",
        "filename": "media/module/mpeg2ts/ESQueue.cpp",
        "patchSetId": 16
      },
      "lineNbr": 398,
      "author": {
        "id": 1962660
      },
      "writtenOn": "2023-02-28T17:02:43Z",
      "side": 1,
      "message": "Can we define these variables when initialising instead of doing it like this.\n\nFor example:\nuint32_t frameSize \u003d bits.getBits(14) + 1; \nunit32_t amode \u003d bits.getBits(6);\nunit32_t freqIndex \u003d bits.getBits(4);",
      "range": {
        "startLine": 398,
        "startChar": 8,
        "endLine": 398,
        "endChar": 43
      },
      "revId": "5ce1e5a9ed9dc91d3fbce37b1163da4fcef1f17e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "72e296e8_2e69f045",
        "filename": "media/module/mpeg2ts/ESQueue.cpp",
        "patchSetId": 16
      },
      "lineNbr": 398,
      "author": {
        "id": 1659435
      },
      "writtenOn": "2023-03-01T14:19:08Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "293fa75f_3abc22c0",
      "range": {
        "startLine": 398,
        "startChar": 8,
        "endLine": 398,
        "endChar": 43
      },
      "revId": "5ce1e5a9ed9dc91d3fbce37b1163da4fcef1f17e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5fd24eb5_2fa23071",
        "filename": "media/module/mpeg2ts/ESQueue.cpp",
        "patchSetId": 16
      },
      "lineNbr": 591,
      "author": {
        "id": 1962660
      },
      "writtenOn": "2023-02-28T17:02:43Z",
      "side": 1,
      "message": "Links to the document like this, can also be added at other places where applicable. It makes debugging the code way faster.",
      "range": {
        "startLine": 591,
        "startChar": 34,
        "endLine": 591,
        "endChar": 76
      },
      "revId": "5ce1e5a9ed9dc91d3fbce37b1163da4fcef1f17e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ef722740_03f5de25",
        "filename": "media/module/mpeg2ts/ESQueue.cpp",
        "patchSetId": 16
      },
      "lineNbr": 591,
      "author": {
        "id": 1659435
      },
      "writtenOn": "2023-03-01T14:19:08Z",
      "side": 1,
      "message": "Atm, I have no other references available, but Xperi can add them if they think are useful.",
      "parentUuid": "5fd24eb5_2fa23071",
      "range": {
        "startLine": 591,
        "startChar": 34,
        "endLine": 591,
        "endChar": 76
      },
      "revId": "5ce1e5a9ed9dc91d3fbce37b1163da4fcef1f17e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}