{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "d7344b93_c3e03ea6",
        "filename": "media/libstagefright/tests/fuzzers/FuzzerMediaUtility.cpp",
        "patchSetId": 4
      },
      "lineNbr": 163,
      "author": {
        "id": 1060104
      },
      "writtenOn": "2024-06-06T13:17:56Z",
      "side": 1,
      "message": "Are the +1s here worth a comment? I\u0027m a bit confused by it because I assume it can overflow so doesn\u0027t affect the actual range of the value.",
      "range": {
        "startLine": 163,
        "startChar": 74,
        "endLine": 163,
        "endChar": 78
      },
      "revId": "d3c9b34023189707087aee1434ffb4901b2e2cc1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ec2943cc_fe69fb4e",
        "filename": "media/libstagefright/tests/fuzzers/FuzzerMediaUtility.cpp",
        "patchSetId": 4
      },
      "lineNbr": 163,
      "author": {
        "id": 2046581
      },
      "writtenOn": "2024-06-06T19:45:45Z",
      "side": 1,
      "message": "Added comments accordingly to specify the significance of +1s.",
      "parentUuid": "d7344b93_c3e03ea6",
      "range": {
        "startLine": 163,
        "startChar": 74,
        "endLine": 163,
        "endChar": 78
      },
      "revId": "d3c9b34023189707087aee1434ffb4901b2e2cc1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b2df8cf2_89f16cb3",
        "filename": "media/libstagefright/tests/fuzzers/FuzzerMediaUtility.cpp",
        "patchSetId": 4
      },
      "lineNbr": 163,
      "author": {
        "id": 1060104
      },
      "writtenOn": "2024-06-07T07:35:57Z",
      "side": 1,
      "message": "I would like to understand specifically the point about overflow. If `ConsumeIntegral` returns 65535, when we add one does it get evaluated as a 16-bit value (and overflow to 0) or 32-bit integer (or something else)?",
      "parentUuid": "ec2943cc_fe69fb4e",
      "range": {
        "startLine": 163,
        "startChar": 74,
        "endLine": 163,
        "endChar": 78
      },
      "revId": "d3c9b34023189707087aee1434ffb4901b2e2cc1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cd1cefd6_2de62f80",
        "filename": "media/libstagefright/tests/fuzzers/FuzzerMediaUtility.cpp",
        "patchSetId": 4
      },
      "lineNbr": 163,
      "author": {
        "id": 2046581
      },
      "writtenOn": "2024-06-07T17:52:41Z",
      "side": 1,
      "message": "If `FuzzedDataProvider::ConsumeIntegral\u003cuint16_t\u003e()` returns `65535`(`UINT16_MAX`), then the highlighted arithmetic expression will treat it as a 32-bit integer and evaluate to `65536`.",
      "parentUuid": "b2df8cf2_89f16cb3",
      "range": {
        "startLine": 163,
        "startChar": 74,
        "endLine": 163,
        "endChar": 78
      },
      "revId": "d3c9b34023189707087aee1434ffb4901b2e2cc1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "35e33bac_67408517",
        "filename": "media/libstagefright/tests/fuzzers/FuzzerMediaUtility.cpp",
        "patchSetId": 4
      },
      "lineNbr": 163,
      "author": {
        "id": 1060104
      },
      "writtenOn": "2024-06-10T09:16:11Z",
      "side": 1,
      "message": "Great, thanks for the info!",
      "parentUuid": "cd1cefd6_2de62f80",
      "range": {
        "startLine": 163,
        "startChar": 74,
        "endLine": 163,
        "endChar": 78
      },
      "revId": "d3c9b34023189707087aee1434ffb4901b2e2cc1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6f9ba9ab_0e6f050e",
        "filename": "media/libstagefright/tests/fuzzers/FuzzerMediaUtility.h",
        "patchSetId": 4
      },
      "lineNbr": 28,
      "author": {
        "id": 1060104
      },
      "writtenOn": "2024-06-06T13:17:56Z",
      "side": 1,
      "message": "Super-nit: please treat acronyms as single words per go/android-cppstyle#symbol-names so `mFdp`.",
      "range": {
        "startLine": 28,
        "startChar": 78,
        "endLine": 28,
        "endChar": 82
      },
      "fixSuggestions": [
        {
          "fixId": "c9d1f5ef_ac0e5a16",
          "description": "prompt_to_edit API",
          "replacements": [
            {
              "path": "media/libstagefright/tests/fuzzers/FuzzerMediaUtility.h",
              "range": {
                "startLine": 28,
                "startChar": 0,
                "endLine": 29,
                "endChar": 0
              },
              "replacement": "    FuzzSource(sp\u003cMetaData\u003e meta, FuzzedDataProvider* fdp) : mMetaData(meta), mFdp(fdp) {}\n"
            },
            {
              "path": "media/libstagefright/tests/fuzzers/FuzzerMediaUtility.h",
              "range": {
                "startLine": 37,
                "startChar": 0,
                "endLine": 40,
                "endChar": 0
              },
              "replacement": "        if (mFdp-\u003eremaining_bytes() \u003e 2) {\n            auto size \u003d mFdp-\u003eConsumeIntegralInRange\u003cuint8_t\u003e(2, INT8_MAX);\n            mBuffer \u003d mFdp-\u003eConsumeBytes\u003cuint8_t\u003e(size);\n"
            },
            {
              "path": "media/libstagefright/tests/fuzzers/FuzzerMediaUtility.h",
              "range": {
                "startLine": 42,
                "startChar": 0,
                "endLine": 44,
                "endChar": 0
              },
              "replacement": "            size_t length \u003d mFdp-\u003eConsumeIntegralInRange\u003csize_t\u003e(2, mbb-\u003esize());\n            size_t offset \u003d mFdp-\u003eConsumeIntegralInRange\u003csize_t\u003e(0, mbb-\u003esize() - length);\n"
            },
            {
              "path": "media/libstagefright/tests/fuzzers/FuzzerMediaUtility.h",
              "range": {
                "startLine": 46,
                "startChar": 0,
                "endLine": 48,
                "endChar": 0
              },
              "replacement": "            mbb-\u003emeta_data().setInt32(kKeyIsEndOfStream, mFdp-\u003eConsumeBool());\n            mbb-\u003emeta_data().setInt64(kKeyTime, mFdp-\u003eConsumeIntegral\u003cuint32_t\u003e() / 2);\n"
            },
            {
              "path": "media/libstagefright/tests/fuzzers/FuzzerMediaUtility.h",
              "range": {
                "startLine": 60,
                "startChar": 0,
                "endLine": 61,
                "endChar": 0
              },
              "replacement": "    FuzzedDataProvider* mFdp \u003d nullptr;\n"
            }
          ]
        }
      ],
      "revId": "d3c9b34023189707087aee1434ffb4901b2e2cc1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a15f70c0_455e170c",
        "filename": "media/libstagefright/tests/fuzzers/FuzzerMediaUtility.h",
        "patchSetId": 4
      },
      "lineNbr": 28,
      "author": {
        "id": 2046581
      },
      "writtenOn": "2024-06-06T19:45:45Z",
      "side": 1,
      "message": "Done.",
      "parentUuid": "6f9ba9ab_0e6f050e",
      "range": {
        "startLine": 28,
        "startChar": 78,
        "endLine": 28,
        "endChar": 82
      },
      "revId": "d3c9b34023189707087aee1434ffb4901b2e2cc1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f232800f_1b61a6b2",
        "filename": "media/libstagefright/tests/fuzzers/FuzzerMediaUtility.h",
        "patchSetId": 4
      },
      "lineNbr": 28,
      "author": {
        "id": 1060104
      },
      "writtenOn": "2024-06-07T07:35:57Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "a15f70c0_455e170c",
      "range": {
        "startLine": 28,
        "startChar": 78,
        "endLine": 28,
        "endChar": 82
      },
      "revId": "d3c9b34023189707087aee1434ffb4901b2e2cc1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4ae3aa4e_de72e1de",
        "filename": "media/libstagefright/tests/fuzzers/FuzzerMediaUtility.h",
        "patchSetId": 4
      },
      "lineNbr": 80,
      "author": {
        "id": 1060104
      },
      "writtenOn": "2024-06-06T13:17:56Z",
      "side": 1,
      "message": "Nit: Can this be const? I\u0027m a bit rusty so sorry if this suggestion is off.",
      "range": {
        "startLine": 80,
        "startChar": 0,
        "endLine": 80,
        "endChar": 6
      },
      "revId": "d3c9b34023189707087aee1434ffb4901b2e2cc1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8ed142d1_985536ce",
        "filename": "media/libstagefright/tests/fuzzers/FuzzerMediaUtility.h",
        "patchSetId": 4
      },
      "lineNbr": 80,
      "author": {
        "id": 1060104
      },
      "writtenOn": "2024-06-06T13:17:56Z",
      "side": 1,
      "message": "Super-nit: similarly `kMpeg4MimeTypes`",
      "range": {
        "startLine": 80,
        "startChar": 19,
        "endLine": 80,
        "endChar": 34
      },
      "fixSuggestions": [
        {
          "fixId": "a2d53696_5f519c27",
          "description": "prompt_to_edit API",
          "replacements": [
            {
              "path": "media/libstagefright/tests/fuzzers/FuzzerMediaUtility.h",
              "range": {
                "startLine": 80,
                "startChar": 0,
                "endLine": 81,
                "endChar": 0
              },
              "replacement": "static const std::string kMPEG4MimeTypes[] \u003d {\n"
            }
          ]
        }
      ],
      "revId": "d3c9b34023189707087aee1434ffb4901b2e2cc1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "26d394c3_a62ab80f",
        "filename": "media/libstagefright/tests/fuzzers/FuzzerMediaUtility.h",
        "patchSetId": 4
      },
      "lineNbr": 80,
      "author": {
        "id": 2046581
      },
      "writtenOn": "2024-06-06T19:45:45Z",
      "side": 1,
      "message": "Added the `const` qualifier.",
      "parentUuid": "4ae3aa4e_de72e1de",
      "range": {
        "startLine": 80,
        "startChar": 0,
        "endLine": 80,
        "endChar": 6
      },
      "revId": "d3c9b34023189707087aee1434ffb4901b2e2cc1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "03cd4aaf_0aa97ef0",
        "filename": "media/libstagefright/tests/fuzzers/FuzzerMediaUtility.h",
        "patchSetId": 4
      },
      "lineNbr": 80,
      "author": {
        "id": 2046581
      },
      "writtenOn": "2024-06-06T19:45:45Z",
      "side": 1,
      "message": "Done.",
      "parentUuid": "8ed142d1_985536ce",
      "range": {
        "startLine": 80,
        "startChar": 19,
        "endLine": 80,
        "endChar": 34
      },
      "revId": "d3c9b34023189707087aee1434ffb4901b2e2cc1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c89ac454_4752795c",
        "filename": "media/libstagefright/tests/fuzzers/FuzzerMediaUtility.h",
        "patchSetId": 4
      },
      "lineNbr": 80,
      "author": {
        "id": 1060104
      },
      "writtenOn": "2024-06-07T07:35:57Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "03cd4aaf_0aa97ef0",
      "range": {
        "startLine": 80,
        "startChar": 19,
        "endLine": 80,
        "endChar": 34
      },
      "revId": "d3c9b34023189707087aee1434ffb4901b2e2cc1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6a5bacd8_2d881689",
        "filename": "media/libstagefright/tests/fuzzers/FuzzerMediaUtility.h",
        "patchSetId": 4
      },
      "lineNbr": 80,
      "author": {
        "id": 1060104
      },
      "writtenOn": "2024-06-07T07:35:57Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "26d394c3_a62ab80f",
      "range": {
        "startLine": 80,
        "startChar": 0,
        "endLine": 80,
        "endChar": 6
      },
      "revId": "d3c9b34023189707087aee1434ffb4901b2e2cc1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}