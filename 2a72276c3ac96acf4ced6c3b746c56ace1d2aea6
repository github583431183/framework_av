{
  "comments": [
    {
      "key": {
        "uuid": "97c76e81_ef366e9f",
        "filename": "media/libaudioclient/IAudioPolicyService.cpp",
        "patchSetId": 1
      },
      "lineNbr": 837,
      "author": {
        "id": 1040213
      },
      "writtenOn": "2017-01-10T17:01:10Z",
      "side": 1,
      "message": "this doesn\u0027t seem possible with a well-formed binder transaction.  if this is nullptr then the binder transaction has been corrupted and perhaps the method shouldn\u0027t be called, and the binder transaction should fail?\n\nSee the matching writeCString definition here.\nhttps://cs.corp.google.com/android/system/libhwbinder/Parcel.cpp?rcl\u003dfe01fec4d25cac0b5ea9768ce1ce5a93c08602a9\u0026l\u003d1056",
      "range": {
        "startLine": 837,
        "startChar": 12,
        "endLine": 837,
        "endChar": 44
      },
      "revId": "2a72276c3ac96acf4ced6c3b746c56ace1d2aea6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "97c76e81_4253f187",
        "filename": "media/libaudioclient/IAudioPolicyService.cpp",
        "patchSetId": 1
      },
      "lineNbr": 837,
      "author": {
        "id": 1003259
      },
      "writtenOn": "2017-01-10T17:25:34Z",
      "side": 1,
      "message": "what if the remote just does not write the strings? You would get a null ptr from data.readCString() no?\nWe had similar security issues on other binder calls.",
      "parentUuid": "97c76e81_ef366e9f",
      "range": {
        "startLine": 837,
        "startChar": 12,
        "endLine": 837,
        "endChar": 44
      },
      "revId": "2a72276c3ac96acf4ced6c3b746c56ace1d2aea6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "97c76e81_e2332507",
        "filename": "media/libaudioclient/IAudioPolicyService.cpp",
        "patchSetId": 1
      },
      "lineNbr": 837,
      "author": {
        "id": 1040213
      },
      "writtenOn": "2017-01-10T17:49:44Z",
      "side": 1,
      "message": "yes, if the data parcel is too small, then a nullptr occurs.  but should this be considered a valid binder transaction?\n\nRather than interpreting it as a valid one by setting device_address \u003d \"\" and calling setDeviceConnectionState (i think this might be confusing), perhaps it is more clear skip the setDeviceConnectionState call, write an ALOGE, and put a bad status code in the reply?  at least, the error handling for the binder transaction would be at the right layer.",
      "parentUuid": "97c76e81_4253f187",
      "range": {
        "startLine": 837,
        "startChar": 12,
        "endLine": 837,
        "endChar": 44
      },
      "revId": "2a72276c3ac96acf4ced6c3b746c56ace1d2aea6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "97c76e81_65c83f0d",
        "filename": "media/libaudioclient/IAudioPolicyService.cpp",
        "patchSetId": 1
      },
      "lineNbr": 837,
      "author": {
        "id": 1003259
      },
      "writtenOn": "2017-01-10T18:25:47Z",
      "side": 1,
      "message": "Ok. I thought you were saying this cannot happen.\n\nAgree to abort before calling setDeviceConnectionState() in case either of those strings are null",
      "parentUuid": "97c76e81_e2332507",
      "range": {
        "startLine": 837,
        "startChar": 12,
        "endLine": 837,
        "endChar": 44
      },
      "revId": "2a72276c3ac96acf4ced6c3b746c56ace1d2aea6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}