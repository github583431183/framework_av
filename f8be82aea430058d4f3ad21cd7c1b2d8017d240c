{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "45aeb90d_644e54fa",
        "filename": "media/codec2/sfplugin/CCodecBufferChannel.cpp",
        "patchSetId": 1
      },
      "lineNbr": 2073,
      "author": {
        "id": 1156740
      },
      "writtenOn": "2023-11-13T22:30:14Z",
      "side": 1,
      "message": "Why dose not maxDequeueCount and output-\u003emaxDequeueBuffers match?",
      "range": {
        "startLine": 2073,
        "startChar": 0,
        "endLine": 2073,
        "endChar": 74
      },
      "revId": "f8be82aea430058d4f3ad21cd7c1b2d8017d240c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8d25fe44_cd16e322",
        "filename": "media/codec2/sfplugin/CCodecBufferChannel.cpp",
        "patchSetId": 1
      },
      "lineNbr": 2073,
      "author": {
        "id": 1765237
      },
      "writtenOn": "2023-11-13T23:05:06Z",
      "side": 1,
      "message": "surface have to include undequeued buffers(mRenderingDepth). on the other hand, OutputBufferQueue in Codec2Client can only have buffers except for undequeued buffers. that is why maxDequeueCount is differerent.",
      "parentUuid": "45aeb90d_644e54fa",
      "range": {
        "startLine": 2073,
        "startChar": 0,
        "endLine": 2073,
        "endChar": 74
      },
      "revId": "f8be82aea430058d4f3ad21cd7c1b2d8017d240c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a0937d3f_e20c97fe",
        "filename": "media/codec2/sfplugin/CCodecBufferChannel.cpp",
        "patchSetId": 1
      },
      "lineNbr": 2073,
      "author": {
        "id": 1156740
      },
      "writtenOn": "2023-11-13T23:57:16Z",
      "side": 1,
      "message": "In the case L2079 should have output-\u003emaxDequeueBuffers instead?\n(ensuring mRendderingDepth out of maxDequeueCount not being dequeued.)",
      "parentUuid": "8d25fe44_cd16e322",
      "range": {
        "startLine": 2073,
        "startChar": 0,
        "endLine": 2073,
        "endChar": 74
      },
      "revId": "f8be82aea430058d4f3ad21cd7c1b2d8017d240c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d6fea76f_fc44ce54",
        "filename": "media/codec2/sfplugin/CCodecBufferChannel.cpp",
        "patchSetId": 1
      },
      "lineNbr": 2073,
      "author": {
        "id": 1765237
      },
      "writtenOn": "2023-11-14T00:30:56Z",
      "side": 1,
      "message": "https://cs.android.com/android/platform/superproject/main/+/main:frameworks/av/media/codec2/hal/client/output.cpp;l\u003d529;drc\u003d6e944a6a6909f6debd7990c79cc7f18715f26b08\n\nin order to set max count what a client is able to get buffers from surface(refers to upper link) at the same time, I removed mRenderingDepth in maxDequeueCount.\nif output-\u003emaxDequeueBuffers does not include undequeued count, you can set maxDequeueCount same as output-\u003emaxDequeueBuffers.\n\n* FYI, mRenderingDepth is abled to be configured by this. (\nhttps://cs.android.com/android/platform/superproject/main/+/main:frameworks/av/media/codec2/sfplugin/CCodecBufferChannel.cpp;l\u003d185;drc\u003d7ba67075d444bb23bd53af8286eaff647e5ec057)",
      "parentUuid": "a0937d3f_e20c97fe",
      "range": {
        "startLine": 2073,
        "startChar": 0,
        "endLine": 2073,
        "endChar": 74
      },
      "revId": "f8be82aea430058d4f3ad21cd7c1b2d8017d240c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "34ec7e51_4fb69b14",
        "filename": "media/codec2/sfplugin/CCodecBufferChannel.cpp",
        "patchSetId": 1
      },
      "lineNbr": 2073,
      "author": {
        "id": 1156740
      },
      "writtenOn": "2023-11-14T06:36:05Z",
      "side": 1,
      "message": "L2075 is not setting max buffer, it\u0027s setting max dequeued buffer.\n\nmax dequeued buffer \u003d max buffers - min undequeued buffers.\n\nAs long as max dequeued buffer count was set by L2073.\nL2079 should configured with same max dequeued buffer.\n\n1) Initial dequeueed buffer count  withtout queueBuffer \u003d max buffers \n2) cancel buffers \u003d min undequeued buffers.\n\nAfter first queueBuffer to surface your max dequeued buffer count is \u0027max dequeued buffer count\u0027\n\nSo In this code, you seems to mix \u0027max bufers\u0027 and \u0027max dequeued buffer count\u0027.",
      "parentUuid": "d6fea76f_fc44ce54",
      "range": {
        "startLine": 2073,
        "startChar": 0,
        "endLine": 2073,
        "endChar": 74
      },
      "revId": "f8be82aea430058d4f3ad21cd7c1b2d8017d240c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d989d602_4645e1f6",
        "filename": "media/codec2/sfplugin/CCodecBufferChannel.cpp",
        "patchSetId": 1
      },
      "lineNbr": 2073,
      "author": {
        "id": 1156740
      },
      "writtenOn": "2023-11-14T07:13:37Z",
      "side": 1,
      "message": "FYI \nhttps://cs.android.com/android/platform/superproject/main/+/main:frameworks/native/libs/nativewindow/include/vndk/window.h;drc\u003d538cedc381f66f6b07265f82be65e5bc725c7e87;l\u003d69",
      "parentUuid": "34ec7e51_4fb69b14",
      "range": {
        "startLine": 2073,
        "startChar": 0,
        "endLine": 2073,
        "endChar": 74
      },
      "revId": "f8be82aea430058d4f3ad21cd7c1b2d8017d240c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}